---
title: 关系代数与关系数据库理论
author: 从此在回忆里
date: 2021-10-04 16:38:06
tags: 大学课程
categories: 数据库
---

### 关系代数及其运算

关系查询语言分为：

关系代数语言：用关系的运算来表达查询要求的方式，查询操作是以集合操作位基础运算的DML语言

关系演算语言：用谓词来表达查询要求的方式，查询操作是以谓词演算为基础运算的DML语言。

<!--more-->

#### 关系代数运算符

##### 集合运算符

| 运算符 | 含义     | 英文              |
| :----- | :------- | :---------------- |
| ∪      | 并       | Union             |
| −      | 差       | Difference        |
| ∩      | 交       | Intersection      |
| ×      | 笛卡尔积 | Cartesian Product |

##### 比较运算符

| 运算符 | 含义     |
| :----- | :------- |
| >      | 大于     |
| ≥      | 大于等于 |
| <      | 小于     |
| ≤      | 小于等于 |
| =      | 等于     |
| ≠      | 不等于   |

##### 专门的关系运算符

| 运算符 | 含义 | 英文       |
| :----- | :--- | :--------- |
| σ      | 选择 | Selection  |
| π      | 投影 | Projection |
| ⋈      | 链接 | Join       |
| ÷      | 除   | Division   |

##### 逻辑运算符

| 运算符 | 含义 |
| :----- | :--- |
| ∧      | 与   |
| ∨      | 或   |
| ¬      | 非   |



##### 基本的关系代数运算

###### 并（Union）

关系 R 与 S 具有相同的关系模式，即 R 与 S 的元数相同（结构相同），R 与 S 的并是属于 R 或者属于 S 的元组构成的集合，记作 R ∪ S，定义如下：

R∪S={t|t∈R∨t∈S}R∪S={t|t∈R∨t∈S}

###### 差（Difference）

关系 R 与 S 具有相同的关系模式，关系 R 与 S 的差是属于 R 但不属于 S 的元组构成的集合，记作 R − S，定义如下：

R−S={t|t∈R∨t∉S}R−S={t|t∈R∨t∉S}

###### 交（Intersection）

关系 R 和 S 具有相同的关系模式，交是由属于 R 同时双属于 S 的元组构成的集合，记作 R∩S，形式如下：

R∩S={t|t∈R∧t∈S}R∩S={t|t∈R∧t∈S}

###### 广义笛卡尔积（Extended Cartesian Product）

两个无数分别为 n 目和 m 目的关系 R 和 S 的 笛卡尔积是一个 (n+m) 列的元组的集合。组的前 n 列是关系 R 的一个元组，后 m 列是关系 S 的一个元组，记作 R × S，定义如下：

R×S={t|t=<(T<sub >n</sub>,T<sub >m</sub>)∧T<sub >n</sub>∈R∧T<sub >m</sub>∈S}R×S={t|t=<(T<sub >n</sub>,T<sub >m</sub>)∧T<sub >n</sub>∈R∧T<sub >m</sub>∈S}

$(t^n,t^m)$ 表示元素 $t^n$ 和 $t^m$ 拼接成的一个元组

**注：新关系中属性的个数为n+m，元组的个数为k1×k2.**

##### 投影（Projection）

投影运算是从关系的垂直方向进行运算，在关系 R 中选出若干属性列 A 组成新的关系，记作 $π_A(R)$，其形式如下：

πA(R)={t[A]|t∈R}πA(R)={t[A]|t∈R}

##### 选择（Selection）

选择运算是从关系的水平方向进行运算，是从关系 R 中选择满足给定条件的元组，记作 $σ_F(R)$，其形式如下：

σF(R)={t|t∈R∧F(t)=True}σF(R)={t|t∈R∧F(t)=True}

###### 实例

设有关系 R、S 如图所示，求 $R∪S$、 $R−S$、 $R×S$、 $π_{A,C}(R)$、 $σ_{A>B}(R)$ 和 $σ_{3<4}(R×S)$

![关系表RS](https://img10.360buyimg.com/devfe/jfs/t3967/269/2409299226/5377/e997b909/58a95fceNddd39fd7.png)

进行并、差运算后结果如下：

![并差](https://img14.360buyimg.com/devfe/jfs/t3949/95/2458170516/5487/1c7f1f38/58a967b1N42db123f.png)

进行笛卡尔、 投影、 选择运算后结果如下：

![笛卡尔_投影_选择](https://img30.360buyimg.com/devfe/jfs/t3943/109/2403665652/38834/c636281b/58a9685dN20af0b9b.png)



##### 链接（Join）

###### 等值链接

当 θ 为「=」时，称之为等值链接，记为： $R\Join_{X=Y}S$

###### 自然链接

自然链接是一种特殊的等值链接，它要求两个关系中进行比较的分量必须是 **相同的属性组**，并且在结果集中将 **重复的属性列** 去掉

例如：设有关系 R、S 如图所示，求 $R \Join S$

![关系RS](https://img11.360buyimg.com/devfe/jfs/t3982/212/2472511181/5973/54467e2a/58aa5ffaN970f7e5a.png)

先求出笛卡尔积 $R×S$，找出比较分量（有相同属性组），即: R.A/S.A 与 R.C/S.C

![求出笛卡尔积](https://img10.360buyimg.com/devfe/jfs/t3841/5/4275908218/12385/79e83d01/58aa6066Nd003e697.png)

取等值链接 $R.A = S.A$ 且 $R.C = S.C$

![找出相同属性的比较分量](https://img10.360buyimg.com/devfe/jfs/t3256/75/6205568741/12327/2b1dc867/58aa60e8N38a84108.png)

结果集中去掉重复属性列，注意无论去掉 R.A 或者 S.A 效果都一样，因为他们的值相等，结果集中只会有属性 A、B、C、D

![结果集中找出重复属性列](https://img12.360buyimg.com/devfe/jfs/t3217/183/6576493853/4744/ccb96965/58aa612eN043f7425.png)

最终得出结果

![RS自然链接结果](https://img12.360buyimg.com/devfe/jfs/t3247/65/6676502314/2874/657ddb0c/58aa617eN2457f536.png)

##### 除（Division）

设有以下如图关系，求 $R÷S$

![关系RS1](https://img10.360buyimg.com/devfe/jfs/t3151/348/6716540896/7287/dc01ad2e/58aaaf3bN1cae8b1a.png)

取关系 R 中有的但 S 中没有的属性组，即：A、B

![关系RS1取属性AB](https://img11.360buyimg.com/devfe/jfs/t3202/137/6722879648/7244/3b47a185/58aaaf81N0b2491b5.png)

取唯一 A、B 属性组值的象集

象集：本质上是一次选择行的运算和一次选择列的运算。
求x1在表A中的象集，就是先选出所有x属性中x=x1的那些行，然后选择出不包含x1的那些列。

![关系RS1取属性AB对应的象集](https://img11.360buyimg.com/devfe/jfs/t3871/170/2430481542/5179/be5899c5/58aaafe6N8297b49f.png)

可知关系S存在于 a,b/c,k 象集 中。即 $R÷S$ 得

![关系RS1除结果](https://img10.360buyimg.com/devfe/jfs/t3130/361/6704334588/3366/6b7e0b56/58aab058N3a3c374d.png)

 **注：当提出查询“全部”，“所有”，“至少”这样的关键字时可以考虑使用除法解决。**

##### 实例：P52

### 关系数据库理论

#### 数据冗余

关系模式中可能存在的冗余和异常问题

1.数据冗余   2.更新异常  3.插入异常  4.删除异常

#### 函数依赖

数据依赖分为：函数依赖、多值依赖、连接依赖

函数依赖与关键字

设R为任一给定关系，如果对于R中属性X的每一个值，R中的属性Y只有唯一值与之对应，则称X函数决定Y或Y函数依赖于X

- 完全函数依赖
  - 如果存在 X 属性集（注意是集合，说明是联合主键）决定唯一的 Y ，且 X 中的任一子集都不能决定唯一的 Y，则 Y 完全依赖于 X。
  - 例如：学生数学成绩完全由该学生的学号和数学课决定，所以数学课成绩完全依赖于（学号，数学课）
- 部分函数依赖
  - X 的属性集中任一子集都可以决定唯一的 Y
  - 例如：学生学号和姓名可以决定唯一的学生，但是学生号也可以决定唯一的学生
- 传递函数依赖
  - 设 R 为任一给定关系， X Y Z 为其不同的属性子集，若 X —> Y, Y 不决定 X 且 Y —>Z，则有 X —>Z，称为 Z 传递函数依赖于 X
  - 例如：书的出版编号是唯一，版权归出版社所有，所以只能由该出版社出版。所以存在函数依赖：书出版编号—>出版社名，出版社名—>出版社地址，但是出版社名不能决定唯一的出版书编号，则有出版社地址传递函数依赖于出版书编号

#### 范式

**第一范式：**

若一个关系模式R的所有属性都是不可分的基本数据项，则该关系属于第一范式（1NF）

满足1NF的关系称为规范化的关系，否则为非规范化关系

**第二范式：**

每一个非主属性都完全依赖于主关键字，而不是部分依赖，则该关系属于第二范式（2NF）

若关系模式R属于1NF，且R中全部是主属性，则R必定是2NF

若关系模式R属于1NF，且R中所有的候选关键字全部是单属性构成，则R必定是2NF

二元关系模式必必定是2NF

**第三范式：**

每一个非主属性都不传递依赖于关键字，则该关系属于第三范式（3NF）

若关系模式R属于1NF，且R中全部是主属性，则R必定是3NF

**BCNF**：

关系模式R是1NF，且每个属性都不传递函数依赖于R的候选关键字，则该关系属于BCNF

二元关系模式必定是BCNF

都是主属性的关系模式并非一定属于BCNF

**非范式化：**

在一个表格中有意义地引入冗余以改进性能被称为非范式化。
