---
title: 计算机网络信息服务系统的安装与配置
author: 从此在回忆里
mathjax: true
date: 2021-10-28 20:18:54
tags: 网络技术
categories: NCRE
---

## DNS域名系统

DNS是Domain Name System的缩写，中文的含义是**域名系统**。将人们易于记忆的域名与人们不容易记忆IP地址进行转换，执行此项功能的主机被称为DNS Server

<!--more-->



DNS服务器的分类

- 根服务器：在因特网上共有13 个根域名服务器（标号为a~m）
- 顶级服务器：负责顶级域名（如com、org、net、edu和gov）和所有国家的顶级域名（如cn）
- 权威服务器：在Internet上具有公共访问主机（如WWW服务器和FTP服务器）的每个组织机构必须提供公共可访问的DNS记录



DNS系统工作原理

- 当DNS客户机提出查询请求时，首先查询本地缓存中查找
- 如果没有符合条件的记录，则产生一个查询请求发给本地DNS服务器
- 本地DNS服务器,当本地DNS服务器接到查询后，首先在该服务器管理的区域的资源记录中查找
  - 如果找到该记录，则将解析结果返回DNS客户机
  - 如果没有满足查询请求的记录，服务器在本地的缓存中查找
  - 如果找到相应记录，则结果过程结束，否则按系统设置将查询请求发送到其他DNS服务器查询
- 客户机如果在规定的时间内未收到查询响应，会尝试其他的DNS服务器或再次查询





DNS服务器配置的主要参数

1. **正向查找区域**

   域名->IP地址；（A）资源记录

2. 反向查找区域

   IP地址->域名；添加（A）资源记录时，使用“添加PTR记录”自动添加到反向查找区域

3. 地址资源记录

   一组结构化的记录，包括（A）、MX（邮件交换记录）、CNAME（别名）

4. **转发器**

　　本地DNS服务器用于将外部DNS名称的DNS查询转发给该DNS服务器，用于**外部域名**的DNS查询



主要考点

- **DNS服务器本机的IP必须静态配置**
- 主机资源记录的生存时间（TTL）指记录被客户端查询到，存放在**缓存中**的持续时间，默认值是**3600**秒。
- DNS服务器中的根DNS服务器**不需**管理员手工配置
- 通过DNS服务器**监视**对话框可以对DNS服务器进行**简单测试**与**递归查询测试**
- 使用**nslookup**命令可以测试正向和反向查找区域
- 清空DNS缓存（DNS cache）的是**ipconfig/flushdns** 
- 缺省情况下Windows 2003系统**没有安装**DNS服务







## DHCP服务

DHCP（Dynamic Host Configuration Protocol，动态主机配置协议）分为两个部份：即服务器端和客户端，其中所有的IP网络设定数据都由DHCP服务器集中管理，并负责处理客户端的DHCP要求；而客户端则会使用从服务器分配下来的IP环境数据（如DNS、gateway的设置等）



DHCP的工作原理

1. DHCP客户机广播“DHCP发现”消息，试图找到网络中的　　DHCP 服务器获得一个IP地址。该封包的来源地址为0.0.0.0，而目的地址则为 255.255.255.255
2. 当 DHCP 服务器接收到“DHCP发现”消息后，就向网络中广播“DHCP供给”消息，其中包括提供DHCP客户机的地址和相关的配置信息
3. DHCP客户机收到“DHCP供给”信息，如果接受DHCP服务器所提供的相关参数，就通过广播”DHCP请求”消息向DHCP服务器请求提供IP地址
4. DHCP服务器广播“DHCP确认”消息，将IP地址分配给DHCP客户端





DHCP服务器配置的术语、主要参数

- 作用域
  - 作用域是一个网络中的所有可分配的 IP 地址的连续范围
  - 作用域主要用来定义网络中单一的物理子网的 IP 地址范围。
- 排除范围
  - 排除范围是不用于分配的 IP 地址序列
  - 用于保证在这个序列中的 IP 地址不会被 DHCP 服务器分配给客户机。　
- 地址池
  - 在用户定义了 DHCP 范围及排除范围后，剩余的地址形成了一个地址池
  - 地址池中的地址可以动态的分配给网络中的客户机使用
- 租约
  - 租约是 DHCP 服务器指定的时间长度，在这个时间范围内客户机可以使用所获得的 IP 地址
  - 当客户机获得 IP 地址时租约被激活
  - 在租约到期前客户机常常需要向服务器更新 IP 地址的租约
- 保留地址
  - 用户可以利用保留地址创建一个永久的地址租约
  - 保留地址保证子网中的指定硬件设备始终使用同一个 IP 地址
  - **可以使用作用域的任何地址，包括排除范围内的地址**。
- 选项类型
  - 选项类型是 DHCP 服务器给 DHCP 工作站分配服务租约时分配的其它客户配置参数
  - 经常使用的选项包括：默认网关的 IP 地址（路由器）, WINS 服务器, 及 DNS 服务器的IP地址。







主要考点

- DHCP工作原理（四次交互）
- 添加排除时必须输入起始IP地址和结束IP地址（不需MAC地址）
- 新建作用域后必须激活才可为客户机分配地址
- 地址租约期限决定客户机使用所获得IP地址的时间长短，最小可调整单位是分钟，客户端自动续约
- 保留是指DHCP服务器指派的永久地址租约，添加保留地址时需获得客户机的MAC地址信息。可以使用排除地址范围。
- DHCP中继。
- 常用指令
  - ipconfig /all（查看到该客户机的配置信息和地址租约） 
  - ipconfig/release（释放已获得的IP地址租约）
  - ipconfig /renew命令（重新从DHCP服务器获得新的IP地址租约）







## WWW服务

浏览器与服务器之间传送信息的的协议时**HTTP**，即超文本传输协议，使用**TCP协议**，默认端口号为**80**。



主要考点

- 建立Web 站点时，必须为该站点指定一个主目录，也可以是虚拟子目录 。
- Web站点必须设置网站的默认文档后才能自动打开“default.html”或”index.html”等页面。
- 在网站的选项中的可设置网站的标识、连接限制、以及启用日　志记录和日志记录格式。　　Web站点可设置静态的IP地址或全选“全部未分配”
- 目录安全选项可选择配置身份验证和访问控制、IP地址和域名限制、安全通信
- 使用IIS建立Web站点设置选项时性能选项，可设置影响带宽使用的属性及客户端Web连接的数量。（**无时间**）
- 网站性能选项中，带宽限制选项限制该网站的可使用带宽
- 访问WEB站点的方法。 
- 在IIS6.0中用虚拟服务器构建多个网站的方法：可以为服务器上的每个站点配置唯一的**标识**或虚拟目录。标识有包括：**主机头名称、IP地址、非标准TCP端口号**。







## FTP服务

- 文件传送协议（FTP）允许用户从服务器上获取文件副本并下载到本地计算机上，或将本地计算机上的一个文件上传到服务器
- 不需要用户登录就能自由下载文件的FTP服务成为匿名FTP服务。
- FTP的传输层使用TCP协议，服务器端提供的端口号**21用于数据连接**，**端口号20用于数据传送**



FTP服务器配置的主要参数

- 域：FTP可建立多个虚拟服务器，每个虚拟服务器成为域，**一个域是由IP地址和端口号唯一识别**
- 匿名用户：对名为**anonymous**的用户自动识别为**匿名用户**，**不设置密码**。
- 命名用户：创建时设置密码，此类用户一般提供更多的访问权限。
- 组：用户组就是将多个命名用户组织在一起，它们拥有相同的权限，这些权限只需在组的选项中设置即可。





FTP服务器的配置

1. 修改管理员密码 （默认管理员:LocalAdministrator），在初次运行的情况下，没有设置管理员的密码

2. 新建域（11上、13上考题）

   - 在Serv-U的管理界面左侧的目录树中选中“域”图标，在菜单栏中选中“域”菜单选项，在显示的下拉菜单中选中“新建域（N）” 。这时界面上将弹出“添加新建域-第一步”对话框
   - 在“IP地址”框中输入FTP服务器的IP地址，这里为“192.168.0.111”，点击【下一步（N）】,进入“添加新建域-第二步” 。**IP地址可为空，意为服务器的所有IP地址**。当服务器有多个IP或动态IP时，比较方便
   - 在“域名”框中输入该服务器的域名，即它的描述名称，这里为“ftp.myftp.com”，点击【下一步（N）】，进入“添加新建域-第三步”。**可以使用域名**
   - 在“域端口号”中输入该服务器的端口号。默认的端口号为“21”，也**可以设置自己想要的端口号**。当然存在一些情况这个21端口，不能使用，这时也该使用别的端口，这里设置该服务器的端口号为“8021”，点击【下一步（N）】,进入“添加新建域-第四步”
   - 在“域类型”对话框中选择域存储的地方。**“.INI文件存储”一般是应用于较小的域，对于用户数大于500的较大的域，应该选择注册表以提供更高的性能**。点击【下一步（N）】，完成FTP服务器的创建

3. 用户的添加与管理（09上、09下、11下）

   - 在Serv-U的管理界面的左侧目录树中选择【域】→【ftp.myftp.com】→【用户】，在菜单栏选中“用户（U）”选项，在弹出的下拉菜单中选中“新建用户（N）”，将弹出“添加新建用户-第一步”对话框

     > 注意：在服务器端创建

   - 在“用户名称”框中输入所要添加的用户的用户名，这里设置为“user”，**如果是匿名用户，则输入用户名“anonymous”**，点击【下一步（N）】，进入“添加新用户-第二步”对话框。**注意：要手工添加**

   - 在“密码”框中输入该用户名访问FTP时所使用的密码，这里为“123456”，当输入的用户名为“anonymous”时，系统自动判定添加的为匿名用户，将不进入这一步。点击【下一步（N）】，进入“添加新用户-第三步”对话框

   - 在“主目录”输该用户访访问FTP时的主目录，或者点击框右面的图标，进行主目录的选择，这里为“D:\共享文件夹”，点击【下一步（N）】，进入“添加新用户-第四步”对话框

   - 选择“是否锁定用户主目录?”后，点击【完成】，完成了添加新用户的操作。  



常用选项

- 服务器选项：在Serv-U的管理界面的左侧目录树中选择【<<本地服务器>>】→【设置】即可打开服务器设置选项对话框。
  - 最大上传速度，最大下载速度：**指整个FTP服务器占用的带宽**
  - 最大用户数量：**同时在线的最大用户数**。
  - 检查匿名密码
  - 删除部分已上传文件
  - 禁用反超时调度
  - 拦截“FTP_bounce”攻击和FXP。
  - **只允许在FTP客户端和服务器间进行文件传输，而不允许在两个FTP服务器间进行文件传输**
- 域设置选项：在Serv-U的管理界面的左侧目录树中选择，【<<本地服务器>>】→【域】→【ftp.myftp.com】→【设置】，则显示“域设置”界面。
  - 域常规选项
  - 域虚拟路径选项
  - IP访问选项
  - 域消息选项
  - 域记录选项
  - 域上传/下载率选项
  - 域高级选项
- 用户选项：在Serv-U的管理界面的左侧目录树中选择【<<本地服务器>>】→【域】→　　【ftp.myftp.com】→【用户】,选中一个用户，如“user”即可打开用户设置对话框。
  - 用户帐号选项
  - 用户常规选项
  - 用户目录访问选项
  - **用户IP访问选项**
  - 用户上传/下载率选项
  - **用户配额选项**
  - **可以限制用户上传信息占用的存储空间**



使用浏览器测试FTP服务器

在浏览器的地址栏中输入服务器的IP地址，如“**ftp:192.168.0.111**”，如果该服务器的端口号不是21，则还需要加上端口号来访问该FTP服务器，格式为：“**ftp:192.168.0.111:8021**”。连接后，可以选择使用匿名方式登录FTP服务器，也可以通过输入正确的用户名和密码来登录对话框。 







## E-mail服务

完整的电子邮件地址（例如，user1@mail.abc.com）由两部分构成，第一部分为信箱名（user1），第二部分为邮件服务器的域名（mail.abc.com）中间用@隔开。

**发送方的邮件服务器在发送邮件时根据第二部分来确定要连接的接收方邮件服务器；接收邮件服务器软件则使用信箱名来选择对应的邮箱将收到的邮件存储起来**。

电子邮件系统使用的协议主要有：**SMTP**，**用于发送电子邮件**，默认的**TCP端口为25**；**POP3**，默认的**TCP端口为110**；**IMAP4**，默认的**TCP端口为143**。用户**访问**并**读取**邮件服务器上的邮件使用POP3或IMAP4协议。

