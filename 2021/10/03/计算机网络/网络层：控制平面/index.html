<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">



  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/notes32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/notes16.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/themes/blue/pace-theme-minimal.css">
  <script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"note.qhp.us","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.7.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>
<meta name="description" content="路由选择算法路由：按照某种指标（传输延迟,所经过的站点数目等）找到一条从源节点到目标节点的较好路径  以网络为单位进行路由（路由信息通告+路由计算） 网络——网络的路由 &#x3D; 路由器——路由器之间的最优路径，用子网的方式大大降低了路由计算的规模 指标：站数，延迟，费用，队列长度等，或者是一些单纯指标的加权平均，采用什么样的指标，表示网络使用者希望网络在什么方面表现突出，什么指标网络使用者比较重视，即">
<meta property="og:type" content="article">
<meta property="og:title" content="网络层：控制平面">
<meta property="og:url" content="http://note.qhp.us/2021/10/03/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E5%B1%82%EF%BC%9A%E6%8E%A7%E5%88%B6%E5%B9%B3%E9%9D%A2/index.html">
<meta property="og:site_name" content="从此在回忆里">
<meta property="og:description" content="路由选择算法路由：按照某种指标（传输延迟,所经过的站点数目等）找到一条从源节点到目标节点的较好路径  以网络为单位进行路由（路由信息通告+路由计算） 网络——网络的路由 &#x3D; 路由器——路由器之间的最优路径，用子网的方式大大降低了路由计算的规模 指标：站数，延迟，费用，队列长度等，或者是一些单纯指标的加权平均，采用什么样的指标，表示网络使用者希望网络在什么方面表现突出，什么指标网络使用者比较重视，即">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://note.qhp.us/2021/10/03/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E5%B1%82%EF%BC%9A%E6%8E%A7%E5%88%B6%E5%B9%B3%E9%9D%A2/image-20210826092308774.png">
<meta property="og:image" content="http://note.qhp.us/2021/10/03/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E5%B1%82%EF%BC%9A%E6%8E%A7%E5%88%B6%E5%B9%B3%E9%9D%A2/image-20210826092804242.png">
<meta property="og:image" content="http://note.qhp.us/2021/10/03/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E5%B1%82%EF%BC%9A%E6%8E%A7%E5%88%B6%E5%B9%B3%E9%9D%A2/image-20210826104659992.png">
<meta property="og:image" content="http://note.qhp.us/2021/10/03/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E5%B1%82%EF%BC%9A%E6%8E%A7%E5%88%B6%E5%B9%B3%E9%9D%A2/image-20210826110539960.png">
<meta property="og:image" content="http://note.qhp.us/2021/10/03/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E5%B1%82%EF%BC%9A%E6%8E%A7%E5%88%B6%E5%B9%B3%E9%9D%A2/image-20210826111139905.png">
<meta property="og:image" content="http://note.qhp.us/2021/10/03/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E5%B1%82%EF%BC%9A%E6%8E%A7%E5%88%B6%E5%B9%B3%E9%9D%A2/image-20210826112432045.png">
<meta property="og:image" content="http://note.qhp.us/2021/10/03/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E5%B1%82%EF%BC%9A%E6%8E%A7%E5%88%B6%E5%B9%B3%E9%9D%A2/image-20210826114815799.png">
<meta property="og:image" content="http://note.qhp.us/2021/10/03/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E5%B1%82%EF%BC%9A%E6%8E%A7%E5%88%B6%E5%B9%B3%E9%9D%A2/%E6%9C%AA%E5%91%BD%E5%90%8D%E6%96%87%E4%BB%B6.png">
<meta property="og:image" content="http://note.qhp.us/2021/10/03/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E5%B1%82%EF%BC%9A%E6%8E%A7%E5%88%B6%E5%B9%B3%E9%9D%A2/image-20210826134242095.png">
<meta property="article:published_time" content="2021-10-03T06:19:38.000Z">
<meta property="article:modified_time" content="2022-01-05T01:17:02.913Z">
<meta property="article:author" content="从此在回忆里">
<meta property="article:tag" content="大学课程">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://note.qhp.us/2021/10/03/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E5%B1%82%EF%BC%9A%E6%8E%A7%E5%88%B6%E5%B9%B3%E9%9D%A2/image-20210826092308774.png">


<link rel="canonical" href="http://note.qhp.us/2021/10/03/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E5%B1%82%EF%BC%9A%E6%8E%A7%E5%88%B6%E5%B9%B3%E9%9D%A2/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"http://note.qhp.us/2021/10/03/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E5%B1%82%EF%BC%9A%E6%8E%A7%E5%88%B6%E5%B9%B3%E9%9D%A2/","path":"2021/10/03/计算机网络/网络层：控制平面/","title":"网络层：控制平面"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>网络层：控制平面 | 从此在回忆里</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">从此在回忆里</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fab fa-themeisle fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fas fa-pallet fa-fw"></i>归档</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%E7%AE%97%E6%B3%95"><span class="nav-text">路由选择算法</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#LS%E7%AE%97%E6%B3%95"><span class="nav-text">LS算法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#LS%E7%9A%84%E5%BA%94%E7%94%A8%E6%83%85%E5%86%B5"><span class="nav-text">LS的应用情况</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#LS%E8%B7%AF%E7%94%B1%E7%9A%84%E5%B7%A5%E4%BD%9C%E8%BF%87%E7%A8%8B"><span class="nav-text">LS路由的工作过程</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%93%BE%E8%B7%AF%E7%8A%B6%E6%80%81%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%EF%BC%88link-state-routing%EF%BC%89"><span class="nav-text">链路状态路由选择（link state routing）</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DV%E7%AE%97%E6%B3%95"><span class="nav-text">DV算法</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%B7%9D%E7%A6%BB%E7%9F%A2%E9%87%8F%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%EF%BC%88distance-vector-routing%EF%BC%89"><span class="nav-text">距离矢量路由选择（distance vector routing）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%B7%9D%E7%A6%BB%E7%9F%A2%E9%87%8F%E8%B7%AF%E7%94%B1%E4%BE%8B%E5%AD%90"><span class="nav-text">距离矢量路由例子</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%B7%9D%E7%A6%BB%E7%9F%A2%E9%87%8F%E7%AE%97%E6%B3%95"><span class="nav-text">距离矢量算法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#DV%E7%9A%84%E6%97%A0%E7%A9%B7%E8%AE%A1%E7%AE%97%E9%97%AE%E9%A2%98"><span class="nav-text">DV的无穷计算问题</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#LS-%E5%92%8C-DV-%E7%AE%97%E6%B3%95%E7%9A%84%E6%AF%94%E8%BE%83"><span class="nav-text">LS 和 DV 算法的比较</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9B%A0%E7%89%B9%E7%BD%91%E4%B8%AD%E8%87%AA%E6%B2%BB%E7%B3%BB%E7%BB%9F%E5%86%85%E9%83%A8%E7%9A%84%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9"><span class="nav-text">因特网中自治系统内部的路由选择</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#RIP"><span class="nav-text">RIP</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#OSPF"><span class="nav-text">OSPF</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ISP%E4%B9%8B%E9%97%B4%E7%9A%84%E8%B7%AF%E7%94%B1%E9%80%89%E6%8B%A9%EF%BC%9ABGP"><span class="nav-text">ISP之间的路由选择：BGP</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B9%B3%E9%9D%A2%E8%B7%AF%E7%94%B1"><span class="nav-text">平面路由</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B1%82%E6%AC%A1%E8%B7%AF%E7%94%B1"><span class="nav-text">层次路由</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BA%92%E8%81%94%E7%BD%91AS%E9%97%B4%E8%B7%AF%E7%94%B1%EF%BC%9ABGP"><span class="nav-text">互联网AS间路由：BGP</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SDN%E6%8E%A7%E5%88%B6%E5%B9%B3%E9%9D%A2"><span class="nav-text">SDN控制平面</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#SDN%E7%89%B9%E7%82%B9"><span class="nav-text">SDN特点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#OpenFlow%E5%8D%8F%E8%AE%AE"><span class="nav-text">OpenFlow协议</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ICMP%EF%BC%9A%E5%9B%A0%E7%89%B9%E7%BD%91%E6%8E%A7%E5%88%B6%E6%8A%A5%E6%96%87%E5%8D%8F%E8%AE%AE"><span class="nav-text">ICMP：因特网控制报文协议</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BD%91%E7%BB%9C%E7%AE%A1%E7%90%86%E5%92%8CSNMP"><span class="nav-text">网络管理和SNMP</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <a target="_blank" rel="noopener" href="https://qhp.us">
    <img class="site-author-image" itemprop="image" alt="从此在回忆里"
      src="/images/avatar.gif">
  </a>
  <p class="site-author-name" itemprop="name">从此在回忆里</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">37</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/QHP1015" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;QHP1015" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="/2439462872@qq.com" title="E-Mail → 2439462872@qq.com"><i class="fas fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://note.qhp.us/2021/10/03/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E5%B1%82%EF%BC%9A%E6%8E%A7%E5%88%B6%E5%B9%B3%E9%9D%A2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="从此在回忆里">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="从此在回忆里">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          网络层：控制平面
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-10-03 14:19:38" itemprop="dateCreated datePublished" datetime="2021-10-03T14:19:38+08:00">2021-10-03</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2022-01-05 09:17:02" itemprop="dateModified" datetime="2022-01-05T09:17:02+08:00">2022-01-05</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" itemprop="url" rel="index"><span itemprop="name">计算机网络</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h2 id="路由选择算法"><a href="#路由选择算法" class="headerlink" title="路由选择算法"></a>路由选择算法</h2><p>路由：按照某种指标（传输延迟,所经过的站点数目等）找到一条从源节点到目标节点的较好路径</p>
<ul>
<li>以网络为单位进行路由（路由信息通告+路由计算）</li>
<li>网络——网络的路由 = 路由器——路由器之间的最优路径，用子网的方式大大降低了路由计算的规模</li>
<li>指标：站数，延迟，费用，队列长度等，或者是一些单纯指标的加权平均，采用什么样的指标，表示网络使用者希望网络在什么方面表现突出，什么指标网络使用者比较重视，即代价</li>
</ul>
<p>路由选择算法（routing algorithm）：网络层软件的一部分,完成路由功能</p>
<span id="more"></span>

<p><strong>网络的图抽象</strong></p>
<p><img src="/2021/10/03/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E5%B1%82%EF%BC%9A%E6%8E%A7%E5%88%B6%E5%B9%B3%E9%9D%A2/image-20210826092308774.png" alt="image-20210826092308774"></p>
<ul>
<li>图：G = (N,E) </li>
<li>N = 路由器集合 = { u, v, w, x, y, z } </li>
<li>E = 链路集合 ={ (u,v), (u,x), (v,x), (v,w), (x,w), (x,y), (w,y), (w,z), (y,z) } </li>
<li>c(x,x’) = 链路的代价 (x,x’)<ul>
<li>代价可能总为１，跳数</li>
<li>或是链路带宽的倒数，最大带宽路径</li>
<li>或是拥塞情况的倒数，最不拥塞路径</li>
</ul>
</li>
<li>路由的输入：拓扑、边的代价、源节点</li>
<li>路由的输出：源节点的汇集树</li>
</ul>
<p>最优化原则（optimality principle）</p>
<p><strong>汇集树（sink tree）</strong></p>
<ul>
<li><p>此节点到所有其它节点的最优路径形成的树</p>
</li>
<li><p>路由选择算法就是为所有路由器找到并使用汇集树</p>
<p><img src="/2021/10/03/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E5%B1%82%EF%BC%9A%E6%8E%A7%E5%88%B6%E5%B9%B3%E9%9D%A2/image-20210826092804242.png" alt="image-20210826092804242"></p>
</li>
</ul>
<p><strong>路由选择算法的原则</strong></p>
<ul>
<li>正确性（correctness）<ul>
<li>算法必须是正确的和完整的，使分组一站一站接力，正确发向目标站</li>
<li>目标所有的站地址，在路由表中都能找到相应的表项</li>
<li>没有处理不了的目标站地址</li>
</ul>
</li>
<li>简单性（simplicity）<ul>
<li>算法在计算机上应简单：最优但复杂的算法</li>
<li>时间上延迟大造成不实用，不应为了获取路由信息增加很多的通信量</li>
</ul>
</li>
<li>健壮性（robustness）<ul>
<li>算法应能适应通信量和网络拓扑的变化：通信量变化，网络拓扑的变化算法能很快适应</li>
<li>不向很拥挤的链路发数据，不向断了的链路发送数据</li>
</ul>
</li>
<li>稳定性（stability）：产生的路由不应该摇摆</li>
<li>公平性（fairness）：对每一个站点都公平</li>
<li>最优性（optimality）：某一个指标的最优，时间上，费用 上，等指标，或综合指标；实际上，获取最优的结果代价较高，可以是次优的</li>
</ul>
<p><strong>路由算法分类</strong></p>
<p>全局/局部路由信息</p>
<ul>
<li>全局<ul>
<li>所有的路由器拥有完整的拓扑和边的代价的信息</li>
<li>“link state” 算法 </li>
</ul>
</li>
<li>分布式<ul>
<li>路由器只知道与它有物理连接关系的邻居路由器，和到相应邻居路由器的代价值</li>
<li>叠代地与邻居交换路由信息、计算路由信息</li>
<li>“distance vector” 算法</li>
</ul>
</li>
</ul>
<p>静态/动态路由信息</p>
<ul>
<li>静态<ul>
<li>路由随时间变化缓慢</li>
<li>非自适应算法（non-adaptive algorithm）：不能适应网络拓扑和通行量的变化，路由表使事现计算好的</li>
</ul>
</li>
<li>动态<ul>
<li>路由变化很快</li>
<li>周期性更新</li>
<li>根据链路代价的变化而变化</li>
<li>自适应路由选择(adaptive algorithm）：能适应网络拓扑和通行量的变化</li>
</ul>
</li>
</ul>
<h3 id="LS算法"><a href="#LS算法" class="headerlink" title="LS算法"></a>LS算法</h3><p>链路状态路由选择算法：Link State</p>
<h4 id="LS的应用情况"><a href="#LS的应用情况" class="headerlink" title="LS的应用情况"></a>LS的应用情况</h4><ul>
<li>OSPF协议是一种LS协议，被用于Internet上</li>
<li>IS-IS（intermediate system-intermediate system）：被用于Internet主干中</li>
</ul>
<h4 id="LS路由的工作过程"><a href="#LS路由的工作过程" class="headerlink" title="LS路由的工作过程"></a>LS路由的工作过程</h4><ul>
<li>各点通过各种渠道获得整个网络拓扑，网络中所有链路代价等信息（这部分和算法没关系，属于协议和实现）</li>
<li>使用LS路由算法，计算本站点到其它站点的最优路径（汇集树），得到路由表</li>
<li>按照此路由表转发分组（datagram方式）</li>
</ul>
<h4 id="链路状态路由选择（link-state-routing）"><a href="#链路状态路由选择（link-state-routing）" class="headerlink" title="链路状态路由选择（link state routing）"></a>链路状态路由选择（link state routing）</h4><ol>
<li>发现相邻节点，获知对方网络地址<ul>
<li>一个路由器工作之后，向所有线路发送HELLO分组</li>
<li>其它路由器收到HELLO分组，回送应答，在应答分组中，告知自己的名字（全局唯一）</li>
<li>在LAN中，通过广播HELLO分组，获得其它路由器的信息</li>
</ul>
</li>
<li>测量到相邻节点的代价（延迟，开销）<ul>
<li>实测法：发送一个分组要求对方立即响应</li>
<li>回送一个ECHO分组</li>
<li>通过测量时间可以估算出延迟情况</li>
</ul>
</li>
<li>组装一个分组，描述相邻节点的情况</li>
<li>将分组通过扩散（即泛洪）的方法发到所有其它路由器<ul>
<li>顺序号：用于控制无穷的扩散，每个路由器都记录（源路由器,顺序号），发现重复的或老的就不扩散<ul>
<li>具体问题1：循环使用问题</li>
<li>具体问题2：路由器崩溃之后序号从0开始</li>
<li>具体问题3：序号出现错误</li>
</ul>
</li>
<li>解决问题的办法：年龄字段（age）<ul>
<li>生成一个分组时，年龄字段不为0</li>
<li>每个一个时间段，AGE字段减1</li>
<li>AGE字段为0的分组将被抛弃</li>
</ul>
</li>
<li>扩散分组的数据结构<ul>
<li>Source：从哪个节点收到LS分组</li>
<li>Seq，Age：序号，年龄</li>
<li>Send flags：发送标记，必须向指定的哪些相邻站点转发LS分组</li>
<li>ACK flags：本站点必须向哪些相邻站点发送应答</li>
<li>DATA：来自source站点的LS分组</li>
</ul>
</li>
</ul>
</li>
<li>通过Dijkstra算法找出最短路径<ul>
<li>路由器获得各站点LS分组和整个网络的拓扑</li>
<li>通过Dijkstra算法计算出到其它各路由器的最短路径（汇集树）</li>
<li>将计算结果安装到路由表中</li>
</ul>
</li>
</ol>
<h3 id="DV算法"><a href="#DV算法" class="headerlink" title="DV算法"></a>DV算法</h3><h4 id="距离矢量路由选择（distance-vector-routing）"><a href="#距离矢量路由选择（distance-vector-routing）" class="headerlink" title="距离矢量路由选择（distance vector routing）"></a>距离矢量路由选择（distance vector routing）</h4><ul>
<li><p>动态路由算法之一 </p>
</li>
<li><p>DV算法历史及应用情况</p>
<ul>
<li>1957 Bellman, 1962 Ford Fulkerson</li>
<li>用于ARPANET, Internet(RIP)  DECnet , Novell, ApplTalk</li>
</ul>
</li>
<li><p>距离矢量路由选择的基本思想</p>
<ul>
<li><p>各路由器维护一张路由表，结构如图</p>
<p><img src="/2021/10/03/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E5%B1%82%EF%BC%9A%E6%8E%A7%E5%88%B6%E5%B9%B3%E9%9D%A2/image-20210826104659992.png" alt="image-20210826104659992"></p>
</li>
<li><p>各路由器与相邻路由器交换路由表</p>
</li>
<li><p>根据获得的路由信息，更新路由表</p>
</li>
</ul>
<img src="/2021/10/03/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E5%B1%82%EF%BC%9A%E6%8E%A7%E5%88%B6%E5%B9%B3%E9%9D%A2/image-20210826110539960.png" alt="image-20210826110539960" style="zoom:67%;"></li>
</ul>
<h4 id="距离矢量路由例子"><a href="#距离矢量路由例子" class="headerlink" title="距离矢量路由例子"></a>距离矢量路由例子</h4><ul>
<li><p>以当前节点J为例，相邻节点 A，I，H，K</p>
</li>
<li><p>J测得到A，I，H，K的延迟为8ms，10ms，12ms，6ms</p>
</li>
<li><p>通过交换DV，从A，I，H，K获得到它们到G的延迟为18ms，31ms，6ms，31ms</p>
</li>
<li><p>因此从J经过A，I，H，K到G的延迟为26ms，41ms，18ms，37ms</p>
</li>
<li><p>将到G的路由表项更新为18ms，下一跳为：H</p>
</li>
<li><p>其它目标一样，除了本节点J</p>
<p><img src="/2021/10/03/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E5%B1%82%EF%BC%9A%E6%8E%A7%E5%88%B6%E5%B9%B3%E9%9D%A2/image-20210826111139905.png" alt="image-20210826111139905"></p>
</li>
</ul>
<h4 id="距离矢量算法"><a href="#距离矢量算法" class="headerlink" title="距离矢量算法"></a><strong>距离矢量算法</strong></h4><p><strong>Bellman-Ford 方程（动态规划）</strong></p>
<p>设 $d_x(y)$：从x到y的最小路径代价，则$d_x(y)=\min {c(x,v)+d_v(y)}$</p>
<ul>
<li>$\min$：取所有x的邻居取最小的v</li>
<li>$c(x,v)$：到邻居v的代价</li>
<li>$d_v(y)$：从邻居v到目标y的代价</li>
</ul>
<ul>
<li><p>异步式，迭代：每次本地迭代被以下事件触发</p>
<ul>
<li>本地链路代价变化了</li>
<li>从邻居来了DV的更新消息</li>
</ul>
</li>
<li><p>分布式：每个节点只是在自己的DV改变之后向邻居通告，然后邻居们在有必要的时候通知他们的邻居</p>
</li>
<li><p>每个节点：<img src="/2021/10/03/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E5%B1%82%EF%BC%9A%E6%8E%A7%E5%88%B6%E5%B9%B3%E9%9D%A2/image-20210826112432045.png" alt="image-20210826112432045"></p>
<p><img src="/2021/10/03/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E5%B1%82%EF%BC%9A%E6%8E%A7%E5%88%B6%E5%B9%B3%E9%9D%A2/image-20210826114815799.png" alt="image-20210826114815799"></p>
</li>
<li><p>经过多次迭代，使得每个节点获得真实的表项</p>
</li>
</ul>
<h4 id="DV的无穷计算问题"><a href="#DV的无穷计算问题" class="headerlink" title="DV的无穷计算问题"></a>DV的无穷计算问题</h4><ul>
<li><p>DV的特点：好消息传的快，坏消息传的慢</p>
<blockquote>
<p>好消息：某个路由器接入或有更短的路径</p>
<p>坏消息：某个路由器被截断，不可达</p>
</blockquote>
<ul>
<li>好消息的传播以每一个交换周期前进一个路由器的速度进行</li>
<li>坏消息的传播速度非常慢（无穷计算问题）</li>
</ul>
</li>
<li><p>水平分裂（split horizon）算法：一种对无穷计算问题的解决办法</p>
<ul>
<li><p>C知道要经过B才能到达A，所以C向B报告它到A的距离为INF；C 告诉D它到A的真实距离</p>
</li>
<li><p>D告诉E，它到A的距离，但D告诉C它通向A的距离为INF</p>
</li>
<li><p>第一次交换：B通过测试发现到A的路径为INF，而C也告诉B到A的距离为INF，因此，B到A的距离为INF</p>
</li>
<li><p>第二次交换：C从B和D那里获知，到A的距离为INF，因此将它到A的距离为INF</p>
</li>
<li><p>坏消息以一次交换一个节点的速度传播</p>
<p><img src="/2021/10/03/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E5%B1%82%EF%BC%9A%E6%8E%A7%E5%88%B6%E5%B9%B3%E9%9D%A2/%E6%9C%AA%E5%91%BD%E5%90%8D%E6%96%87%E4%BB%B6.png" alt="未命名文件"></p>
</li>
<li><p>缺点：在某些拓扑形式下会失败（存在环路）</p>
</li>
</ul>
</li>
</ul>
<h3 id="LS-和-DV-算法的比较"><a href="#LS-和-DV-算法的比较" class="headerlink" title="LS 和 DV 算法的比较"></a>LS 和 DV 算法的比较</h3><p>消息复杂度（DV胜出）</p>
<ul>
<li>LS：有 n 节点, E 条链路,发送报文：O(nE)个<ul>
<li>局部的路由信息；全局传播</li>
</ul>
</li>
<li>DV：只和邻居交换信息<ul>
<li>全局的路由信息，局部传播</li>
</ul>
</li>
</ul>
<p>收敛时间（LS胜出）</p>
<ul>
<li>LS：O($n^2$) <ul>
<li>算法有可能震荡</li>
</ul>
</li>
<li>DV：收敛较慢<ul>
<li>可能存在路由环路</li>
<li>count-to-infinity 问题</li>
</ul>
</li>
</ul>
<p>健壮性（LS胜出） </p>
<ul>
<li>LS<ul>
<li>节点会通告不正确的链路代价</li>
<li>每个节点只计算自己的路由表</li>
<li>错误信息影响较小，局部，路由较健壮</li>
</ul>
</li>
<li>DV<ul>
<li>DV 节点可能通告对全网所有节点的不正确路径代价<ul>
<li>距离矢量</li>
</ul>
</li>
<li>每一个节点的路由表可能被其它节点使用<ul>
<li>错误可以扩散到全网</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="因特网中自治系统内部的路由选择"><a href="#因特网中自治系统内部的路由选择" class="headerlink" title="因特网中自治系统内部的路由选择"></a>因特网中自治系统内部的路由选择</h2><h3 id="RIP"><a href="#RIP" class="headerlink" title="RIP"></a>RIP</h3><p>路由信息协议：Routing Information Protocol：</p>
<ul>
<li>基于Distance vector 算法<ul>
<li>距离矢量：:每条链路代价cost=1，即hops (max = 15 hops) 跳数</li>
<li>DV每隔30秒和邻居交换DV，<strong>通告</strong></li>
<li>每个通告包括：最多25个<strong>目标子网</strong></li>
</ul>
</li>
<li>DV：在邻居之间每30秒交换通告报文<ul>
<li>定期，而且在改变路由的时候发送通告报文</li>
<li>在对方的请求下可以发送通告报文</li>
</ul>
</li>
<li>每一个通告：至多AS内部的25个目标网络的 DV <ul>
<li>目标网络+跳数：一次公告最多25个；子网最大跳数为16 </li>
</ul>
</li>
</ul>
<p>RIP链路失效和恢复如果：180秒没有收到通告信息，则认为邻居或者链路失效</p>
<ul>
<li>发现经过这个邻居的路由已失效</li>
<li>新的通告报文会传递给邻居</li>
<li>邻居因此发出新的通告（如果路由变化的话）</li>
<li>链路失效快速地在整网中传输</li>
<li>使用毒性逆转（poison reverse）阻止ping-pong回路（不可达的距离：跳数无限 = 16 段）</li>
</ul>
<p>RIP 进程处理</p>
<ul>
<li>RIP 以应用进程的方式实现：route-d (daemon) </li>
<li>通告报文通过UDP报文传送，周期性重复</li>
<li>网络层的协议使用了传输层的服务（传输距离矢量），以应用层实体的方式实现</li>
</ul>
<h3 id="OSPF"><a href="#OSPF" class="headerlink" title="OSPF"></a>OSPF</h3><p>开放最短路径优先：Open Shortest Path First</p>
<ul>
<li>使用LS算法<ul>
<li>LS 分组在网络中（一个AS内部）分发</li>
<li>全局网络拓扑、代价在每一个节点中都保持</li>
<li>路由计算采用Dijkstra算法</li>
</ul>
</li>
<li>OSPF通告信息中携带表项，每一个邻居路由器一个表项</li>
<li>通告信息会传遍AS全部（通过泛洪）<ul>
<li>在IP数据报上直接传送OSPF报文（而不是通过UDP和TCP）</li>
</ul>
</li>
<li>IS-IS路由协议：几乎和OSPF一样</li>
<li>安全：所有的OSPF报文都是经过认证的 (防止恶意的攻击)</li>
<li>允许有多个代价相同的路径存在 (在RIP协议中只有一个)</li>
<li>对于每一个链路，对于不同的TOS有多重代价矩阵<ul>
<li>例如：卫星链路代价对于尽力而为的服务代价设置比较低，对实时服务代价设置的比较高</li>
<li>支持按照不同的代价计算最优路径，如：按照时间和延迟分别计算最优路径</li>
</ul>
</li>
<li>对单播和多播的集成支持<ul>
<li>Multicast OSPF (MOSPF) 使用相同的拓扑数据库， 就像在OSPF中一样</li>
</ul>
</li>
<li>在大型网络中支持<strong>层次性</strong>OSPF</li>
</ul>
<p>层次化OSPF路由</p>
<ul>
<li><p>2个级别的层次性：本地, 骨干</p>
<ul>
<li>链路状态通告仅仅在本地区域Area范围内进行</li>
<li>每一个节点拥有本地区域的拓扑信息<ul>
<li>关于其他区域，仅知道去它的方向，通过区域边界路由器（最短路径）</li>
</ul>
</li>
</ul>
</li>
<li><p>区域边界路由器：“汇总（聚集）”到自己区域内网络的距离，向其它区域边界路由器通告</p>
</li>
<li><p>骨干路由器：仅仅在骨干区域内，运行OSPF路由</p>
</li>
<li><p>边界路由器：连接其它的AS’s</p>
<p><img src="/2021/10/03/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E5%B1%82%EF%BC%9A%E6%8E%A7%E5%88%B6%E5%B9%B3%E9%9D%A2/image-20210826134242095.png" alt="image-20210826134242095"></p>
</li>
</ul>
<h2 id="ISP之间的路由选择：BGP"><a href="#ISP之间的路由选择：BGP" class="headerlink" title="ISP之间的路由选择：BGP"></a>ISP之间的路由选择：BGP</h2><h3 id="平面路由"><a href="#平面路由" class="headerlink" title="平面路由"></a>平面路由</h3><ul>
<li>一个网络中的所有路由器的地位一样</li>
<li>通过LS, DV，或者其他路由算法，所有路由器都要知道其他所有路由器（子网）如何走</li>
<li>所有路由器在一个平面</li>
<li>平面路由的问题<ul>
<li>规模巨大的网络中，路由信息的存储、传输和计算代价巨大<ul>
<li>DV：距离矢量很大，且不能够收敛</li>
<li>LS：几百万个节点的LS分组的泛洪传输，存储以及最短路径算法的计算</li>
</ul>
</li>
<li>管理问题<ul>
<li>不同的网络所有者希望按照自己的方式管理网络</li>
<li>希望对外隐藏自己网络的细节</li>
<li>希望和其它网络互联</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="层次路由"><a href="#层次路由" class="headerlink" title="层次路由"></a>层次路由</h3><p>层次路由：将互联网分成一个个AS(路由器区域)</p>
<ul>
<li>某个区域内的路由器集合，自治系统（Autonomous  Systems，AS）</li>
<li>一个AS用AS Number （ASN）唯一标示</li>
<li>一个ISP可能包括1个或者多个AS</li>
</ul>
<p>路由变成了2个层次路由</p>
<ul>
<li>AS内部路由：在同一个AS内路由器运行相同的路由协议<ul>
<li>“intra-AS” routing  protocol：内部网关协议</li>
<li>不同的AS可能运行着不同的内部网关协议</li>
<li>能够解决规模和管理问题</li>
<li>如：RIP，OSPF，IGRP</li>
<li>网关路由器：AS边缘路由器，可以连接到其他AS</li>
</ul>
</li>
<li>AS间运行AS间路由协议<ul>
<li>“inter-AS” routing  protocol：外部网关协议</li>
<li>解决AS之间的路由问题，完 成AS之间的互联互通</li>
</ul>
</li>
</ul>
<p>层次路由的优点</p>
<ul>
<li>解决了规模问题<ul>
<li>内部网关协议解决：AS内部数量有限的路由器相互到达的问题，AS内部规模可控<ul>
<li>如AS节点太多，可分割AS，使得AS内部的节点数量有限</li>
</ul>
</li>
<li>AS之间的路由的规模问题<ul>
<li>增加一个AS，对于AS之间的路由从总体上来说，只是增加了一 个节点，即子网（每个AS可以用一个点来表示）</li>
<li>对于其他AS来说只是增加了一 个表项，就是这个新增的AS如何走的问题</li>
<li>扩展性强：规模增大，性能不会减得太多</li>
</ul>
</li>
</ul>
</li>
<li>解决了管理问题<ul>
<li>各个AS可以运行不 同的内部网关协议</li>
<li>可以使自己网络的细节不向外透露</li>
</ul>
</li>
</ul>
<h3 id="互联网AS间路由：BGP"><a href="#互联网AS间路由：BGP" class="headerlink" title="互联网AS间路由：BGP"></a>互联网AS间路由：BGP</h3><ul>
<li><p>BGP（Border Gateway Protocol）：自治区域间路由协议，边界网关协议</p>
</li>
<li><p>BGP 提供给每个AS以下方法</p>
<ul>
<li>eBGP：从相邻的ASes那里获得子网可达信息</li>
<li>iBGP：将获得的子网可达信息传遍到AS内部的所有路由器</li>
<li>根据子网可达信息和策略来决定到达子网的“好”路径</li>
</ul>
</li>
<li><p>允许子网向互联网其他网络通告“我在这里”</p>
</li>
<li><p>基于距离矢量算法（路径矢量），不仅仅是距离矢量，还包括到达各个目标网络的详细路径（AS 序号的列表）能够避免简单DV算法的路由环路问题</p>
</li>
</ul>
<ul>
<li><p>BGP会话：2个BGP路由器（“peers”）在一个半永久的TCP连接上交换BGP报文</p>
<ul>
<li>通告向不同目标子网前缀的“路径”（BGP是一个“路径矢量”协议）</li>
</ul>
</li>
<li><p>当通告一个子网前缀时，通告包括 BGP 属性</p>
<ul>
<li>prefix + attributes = “route” </li>
</ul>
</li>
<li><p>2个重要的属性</p>
<ul>
<li>AS-PATH：前缀的通告所经过的AS列表，如AS 67 AS 17<ul>
<li>检测环路；多路径选择</li>
<li>在向其它AS转发时，需要将自己的AS号加在路径上</li>
</ul>
</li>
<li>NEXT-HOP：从当前AS到下一跳AS有多个链路，在NETX-HOP 属性中，告诉对方通过哪个转发</li>
<li>其它属性：路由偏好指标，如何被插入的属性</li>
</ul>
</li>
<li><p>基于策略的路由</p>
<ul>
<li>当一个网关路由器接收到了一个路由通告，使用输入策略来接受或过滤（accept/decline.）<ul>
<li>过滤原因例1：不想经过某个AS，转发某些前缀的分组</li>
<li>过滤原因例2：已经有了一条往某前缀的偏好路径</li>
</ul>
</li>
<li>策略也决定了是否向它别的邻居通告收到的这个路由信息</li>
</ul>
</li>
</ul>
<ul>
<li>使用TCP协议交换BGP报文</li>
<li>BGP 报文<ul>
<li>OPEN：打开TCP连接，认证发送方</li>
<li>UPDATE：通告新路径（或者撤销原路径）</li>
<li>KEEPALIVE：在没有更新时保持连接，也用于对 OPEN 请求确认</li>
<li>NOTIFICATION：报告以前消息的错误，也用来关闭连接</li>
</ul>
</li>
</ul>
<ul>
<li><p>BGP 路径选择</p>
<ul>
<li><p>路由器可能获得一个网络前缀的多个路径，路由器必须进行路径的选择，路由选择可以基于</p>
<ol>
<li><p>本地偏好值属性：偏好策略决定</p>
</li>
<li><p>最短AS-PATH ：AS的跳数</p>
</li>
<li><p>最近的NEXT-HOP路由器：热土豆路由</p>
<blockquote>
<p>热土豆策略：选择具备最小内部区域代价的网关作为去往目的的出口，不操心域间的代价</p>
</blockquote>
</li>
<li><p>附加的判据：使用BGP标示</p>
</li>
</ol>
</li>
<li><p>一个前缀对应着多种路径，采用消除规则直到留下一条路径</p>
</li>
</ul>
</li>
</ul>
<p>为什么内部网关协议和外部网关协议如此不同?</p>
<ul>
<li>策略<ul>
<li>Inter-AS（外部）：管理员需要控制通信路径，谁在使用它的网络进行数据传输</li>
<li>Intra-AS（内部）：一个管理者，所以无需策略<ul>
<li>AS内部的各子网的主机尽可能地利用资源进行快速路由</li>
</ul>
</li>
</ul>
</li>
<li>规模<ul>
<li>AS间路由必须考虑规模问题，以便支持全网的数据转发</li>
<li>AS内部路由规模不是一个大的问题<ul>
<li>如果AS 太大，可将此AS分成小的AS，因此规模可控</li>
<li>AS之间只使多了一个点</li>
<li>或者AS内部路由支持层次性，层次性路由节约了表空间，降低了更新的数据流量</li>
</ul>
</li>
</ul>
</li>
<li>性能<ul>
<li>Intra-AS：关注性能</li>
<li>Inter-AS：策略可能比性能更重</li>
</ul>
</li>
</ul>
<h2 id="SDN控制平面"><a href="#SDN控制平面" class="headerlink" title="SDN控制平面"></a>SDN控制平面</h2><p>为什么需要一个逻辑上集中的控制平面？</p>
<ul>
<li>网络管理更加容易：避免路由器的错误配置，对于通信流的弹性更好</li>
<li>基于流表的转发，允 许“可编程”的路由器<ul>
<li>集中式“编程”更加容易：集中计算流表然后分发</li>
<li>传统方式分布式“编程”困难：在每个单独的路由器上分别运行分布式的算法，得到转发表（部署和升级代价高），而且要求各分布式计算出的转发表都得基本正确</li>
</ul>
</li>
<li>控制平面的开放实现（非私有）<ul>
<li>新的竞争生态</li>
</ul>
</li>
</ul>
<h3 id="SDN特点"><a href="#SDN特点" class="headerlink" title="SDN特点"></a>SDN特点</h3><ul>
<li>基于流的匹配+行动</li>
<li>控制平面和数据平面的分离</li>
<li>控制平面功能在数据交换设备之外实现</li>
<li>可编程控制：在控制器之上以网络应用形式实现各种网络功能</li>
</ul>
<h3 id="OpenFlow协议"><a href="#OpenFlow协议" class="headerlink" title="OpenFlow协议"></a>OpenFlow协议</h3><ul>
<li>控制器和SDN交换机交互的协议</li>
<li>采用TCP 来交换报文<ul>
<li>加密可选</li>
</ul>
</li>
<li>3种OpenFlow报文类型<ul>
<li>控制器&gt;&gt;&gt;交换机</li>
<li>异步（交换机&gt;&gt;&gt;控制器 ）</li>
<li>对称（misc）</li>
</ul>
</li>
</ul>
<p>OpenFlow：关键的控制器—交换机报文</p>
<ul>
<li>特性：控制器查询交换机特性，交换机应答</li>
<li>配置：交换机查询/设置交换机的配置参数</li>
<li>修改状态：增加删除修改OpenFlow表中的流表</li>
<li>packet-out：控制器可以将分组通过特定的端口发出</li>
</ul>
<p>OpenFlow：关键的交换机—控制器的报文</p>
<ul>
<li>分组进入：将分组（和它的控制）传给控制器，见来自控制器的packet-out报文</li>
<li>流移除：在交换机上删除流表项</li>
<li>端口状态：通告控制器端口的变化</li>
</ul>
<p> 网络管理员不需要直接通过创建/发送流表来编程交换机，而是采用在控制器上的app自动运算和配置</p>
<p>OpenDaylight（ODL）控制器和ONOS控制器</p>
<h2 id="ICMP：因特网控制报文协议"><a href="#ICMP：因特网控制报文协议" class="headerlink" title="ICMP：因特网控制报文协议"></a>ICMP：因特网控制报文协议</h2><ul>
<li>由主机、路由器、网关用于传达网络层控制信息<ul>
<li>错误报告：主机不可到达、 网络、端口、协议</li>
<li>Echo 请求和回复（ping）</li>
</ul>
</li>
<li>ICMP处在网络层，但是是在IP协议的上面，ICMP消息由IP数据报承载</li>
<li>ICMP 报文<ul>
<li>类型</li>
<li>编码</li>
<li>第一个导致该ICMP报文的IP数据报头8个字节</li>
</ul>
</li>
</ul>
<table>
<thead>
<tr>
<th>ICMP类型</th>
<th>编码</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td>0</td>
<td>0</td>
<td>回显回答（对ping的回答）</td>
</tr>
<tr>
<td>3</td>
<td>0</td>
<td>目的网络不可达</td>
</tr>
<tr>
<td>3</td>
<td>1</td>
<td>目的主机不可达</td>
</tr>
<tr>
<td>3</td>
<td>2</td>
<td>目的协议不可达</td>
</tr>
<tr>
<td>3</td>
<td>3</td>
<td>目的端口不可达</td>
</tr>
<tr>
<td>3</td>
<td>6</td>
<td>目的网络未知</td>
</tr>
<tr>
<td>3</td>
<td>7</td>
<td>目的主机未知</td>
</tr>
<tr>
<td>4</td>
<td>0</td>
<td>源抑制（拥塞控制）</td>
</tr>
<tr>
<td>8</td>
<td>0</td>
<td>回显请求</td>
</tr>
<tr>
<td>9</td>
<td>0</td>
<td>路由器通告</td>
</tr>
<tr>
<td>10</td>
<td>0</td>
<td>路由器发现</td>
</tr>
<tr>
<td>11</td>
<td>0</td>
<td>TTL过期</td>
</tr>
<tr>
<td>12</td>
<td>0</td>
<td>IP首部损坏</td>
</tr>
</tbody></table>
<h2 id="网络管理和SNMP"><a href="#网络管理和SNMP" class="headerlink" title="网络管理和SNMP"></a>网络管理和SNMP</h2><p>网络管理功能</p>
<ul>
<li>性能管理<ul>
<li>性能（利用率、吞吐量）量化、测量、报告、分析和控制不同网络部件的性能</li>
<li>涉及到的部件：单独部件（网卡，协议实体），端到端的路径</li>
</ul>
</li>
<li>故障管理：记录、检测和响应故障<ul>
<li>性能管理为长期监测设备性能</li>
<li>故障管理：突然发生的强度大的性能降低，强调对故障的响应</li>
</ul>
</li>
<li>配置管理：跟踪设备的配置，管理设备配置信息</li>
<li>账户管理：定义、记录和控制用户和设备访问网络资源<ul>
<li>限额使用、给予使用的收费，以及分配资源访问权限</li>
</ul>
</li>
<li>安全管理：定义安全策略，控制对网络资源的使用</li>
</ul>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E5%A4%A7%E5%AD%A6%E8%AF%BE%E7%A8%8B/" rel="tag"># 大学课程</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2021/10/03/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E7%BD%91%E7%BB%9C%E5%B1%82%EF%BC%9A%E6%95%B0%E6%8D%AE%E5%B9%B3%E9%9D%A2/" rel="prev" title="网络层：数据平面">
                  <i class="fa fa-chevron-left"></i> 网络层：数据平面
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2021/10/04/%E6%95%B0%E6%8D%AE%E5%BA%93/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%BF%B0/" rel="next" title="数据库系统概述">
                  数据库系统概述 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fab fa-optin-monster"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">从此在回忆里</span>
</div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  
<script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>




  <script src="/js/third-party/pace.js"></script>

  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js","integrity":"sha256-r+3itOMtGGjap0x+10hu6jW/gZCzxHsoKrOd7gyRSGY="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>



</body>
</html>
