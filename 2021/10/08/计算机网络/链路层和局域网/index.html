<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">



  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/notes32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/notes16.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/themes/blue/pace-theme-minimal.css">
  <script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"note.qhp.us","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.7.1","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>
<meta name="description" content="链路层概述网络节点的连接方式  点到点连接 多点连接 共享型介质（同轴电缆连接） 通过网络交换机">
<meta property="og:type" content="article">
<meta property="og:title" content="链路层和局域网">
<meta property="og:url" content="http://note.qhp.us/2021/10/08/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E9%93%BE%E8%B7%AF%E5%B1%82%E5%92%8C%E5%B1%80%E5%9F%9F%E7%BD%91/index.html">
<meta property="og:site_name" content="从此在回忆里">
<meta property="og:description" content="链路层概述网络节点的连接方式  点到点连接 多点连接 共享型介质（同轴电缆连接） 通过网络交换机">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://note.qhp.us/2021/10/08/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E9%93%BE%E8%B7%AF%E5%B1%82%E5%92%8C%E5%B1%80%E5%9F%9F%E7%BD%91/image-20210907115132473.png">
<meta property="og:image" content="http://note.qhp.us/2021/10/08/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E9%93%BE%E8%B7%AF%E5%B1%82%E5%92%8C%E5%B1%80%E5%9F%9F%E7%BD%91/image-20210907124300634.png">
<meta property="og:image" content="http://note.qhp.us/2021/10/08/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E9%93%BE%E8%B7%AF%E5%B1%82%E5%92%8C%E5%B1%80%E5%9F%9F%E7%BD%91/image-20211006125243999.png">
<meta property="og:image" content="http://note.qhp.us/2021/10/08/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E9%93%BE%E8%B7%AF%E5%B1%82%E5%92%8C%E5%B1%80%E5%9F%9F%E7%BD%91/image-20211008092831473.png">
<meta property="og:image" content="http://note.qhp.us/2021/10/08/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E9%93%BE%E8%B7%AF%E5%B1%82%E5%92%8C%E5%B1%80%E5%9F%9F%E7%BD%91/image-20211008092906021.png">
<meta property="og:image" content="http://note.qhp.us/2021/10/08/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E9%93%BE%E8%B7%AF%E5%B1%82%E5%92%8C%E5%B1%80%E5%9F%9F%E7%BD%91/image-20211008093047673.png">
<meta property="og:image" content="http://note.qhp.us/2021/10/08/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E9%93%BE%E8%B7%AF%E5%B1%82%E5%92%8C%E5%B1%80%E5%9F%9F%E7%BD%91/image-20211008100338741.png">
<meta property="og:image" content="http://note.qhp.us/2021/10/08/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E9%93%BE%E8%B7%AF%E5%B1%82%E5%92%8C%E5%B1%80%E5%9F%9F%E7%BD%91/image-20211008100500832.png">
<meta property="og:image" content="http://note.qhp.us/2021/10/08/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E9%93%BE%E8%B7%AF%E5%B1%82%E5%92%8C%E5%B1%80%E5%9F%9F%E7%BD%91/image-20211008101251525.png">
<meta property="og:image" content="http://note.qhp.us/2021/10/08/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E9%93%BE%E8%B7%AF%E5%B1%82%E5%92%8C%E5%B1%80%E5%9F%9F%E7%BD%91/image-20211008115830070.png">
<meta property="og:image" content="http://note.qhp.us/2021/10/08/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E9%93%BE%E8%B7%AF%E5%B1%82%E5%92%8C%E5%B1%80%E5%9F%9F%E7%BD%91/image-20211008115945670.png">
<meta property="article:published_time" content="2021-10-08T11:34:00.000Z">
<meta property="article:modified_time" content="2022-01-05T01:17:02.925Z">
<meta property="article:author" content="从此在回忆里">
<meta property="article:tag" content="大学课程">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://note.qhp.us/2021/10/08/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E9%93%BE%E8%B7%AF%E5%B1%82%E5%92%8C%E5%B1%80%E5%9F%9F%E7%BD%91/image-20210907115132473.png">


<link rel="canonical" href="http://note.qhp.us/2021/10/08/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E9%93%BE%E8%B7%AF%E5%B1%82%E5%92%8C%E5%B1%80%E5%9F%9F%E7%BD%91/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"http://note.qhp.us/2021/10/08/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E9%93%BE%E8%B7%AF%E5%B1%82%E5%92%8C%E5%B1%80%E5%9F%9F%E7%BD%91/","path":"2021/10/08/计算机网络/链路层和局域网/","title":"链路层和局域网"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>链路层和局域网 | 从此在回忆里</title>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">从此在回忆里</h1>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fab fa-themeisle fa-fw"></i>首页</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fas fa-pallet fa-fw"></i>归档</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%93%BE%E8%B7%AF%E5%B1%82%E6%A6%82%E8%BF%B0"><span class="nav-text">链路层概述</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B7%AE%E9%94%99%E6%A3%80%E6%9F%A5%E5%92%8C%E7%BA%A0%E6%AD%A3%E9%94%99%E8%AF%AF"><span class="nav-text">差错检查和纠正错误</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A4%9A%E8%B7%AF%E8%AE%BF%E9%97%AE%E9%93%BE%E8%B7%AF%E5%92%8C%E5%8D%8F%E8%AE%AE"><span class="nav-text">多路访问链路和协议</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%9A%E8%B7%AF%E8%AE%BF%E9%97%AE%E5%8D%8F%E8%AE%AE"><span class="nav-text">多路访问协议</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%A1%E9%81%93%E5%88%92%E5%88%86%E5%8D%8F%E8%AE%AE"><span class="nav-text">信道划分协议</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9A%8F%E6%9C%BA%E5%AD%98%E5%8F%96%E5%8D%8F%E8%AE%AE"><span class="nav-text">随机存取协议</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%97%B6%E9%9A%99ALOHA"><span class="nav-text">时隙ALOHA</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BA%AFALOHA%EF%BC%88%E9%9D%9E%E6%97%B6%E9%9A%99%EF%BC%89"><span class="nav-text">纯ALOHA（非时隙）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#CSMA"><span class="nav-text">CSMA</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#CSMA-CD%EF%BC%88%E5%86%B2%E7%AA%81%E6%A3%80%E6%B5%8B%EF%BC%89"><span class="nav-text">CSMA&#x2F;CD（冲突检测）</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#CSMA-CA%EF%BC%88%E5%86%B2%E7%AA%81%E9%81%BF%E5%85%8D%EF%BC%89"><span class="nav-text">CSMA&#x2F;CA（冲突避免）</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BA%BF%E7%BC%86%E6%8E%A5%E5%85%A5%E7%BD%91%E7%BB%9C"><span class="nav-text">线缆接入网络</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BD%AE%E6%B5%81MAC%E5%8D%8F%E8%AE%AE"><span class="nav-text">轮流MAC协议</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%BD%AE%E8%AF%A2%E5%8D%8F%E8%AE%AE"><span class="nav-text">轮询协议</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BB%A4%E7%89%8C%E4%BC%A0%E9%80%92%E5%8D%8F%E8%AE%AE"><span class="nav-text">令牌传递协议</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#LANs"><span class="nav-text">LANs</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%93%BE%E8%B7%AF%E5%B1%82%E5%AF%BB%E5%9D%80%E5%92%8CARP"><span class="nav-text">链路层寻址和ARP</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%BD%91%E7%BB%9C%E5%9C%B0%E5%9D%80%E5%92%8CMAC%E5%9C%B0%E5%9D%80"><span class="nav-text">网络地址和MAC地址</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ARP%EF%BC%88%E5%9C%B0%E5%9D%80%E8%A7%A3%E6%9E%90%E5%8D%8F%E8%AE%AE%EF%BC%89"><span class="nav-text">ARP（地址解析协议）</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%A5%E5%A4%AA%E7%BD%91"><span class="nav-text">以太网</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BB%A5%E5%A4%AA%E7%BD%91%E7%9A%84%E7%89%A9%E7%90%86%E6%8B%93%E6%89%91"><span class="nav-text">以太网的物理拓扑</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BB%A5%E5%A4%AA%E5%B8%A7%E7%BB%93%E6%9E%84"><span class="nav-text">以太帧结构</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BB%A5%E5%A4%AA%E7%BD%91-1"><span class="nav-text">以太网</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Hubs"><span class="nav-text">Hubs</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Manchester-%E7%BC%96%E7%A0%81"><span class="nav-text">Manchester 编码</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#100BaseT%E4%B8%AD%E7%9A%844b5b%E7%BC%96%E7%A0%81"><span class="nav-text">100BaseT中的4b5b编码</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8D%83%E5%85%86%E4%BB%A5%E5%A4%AA%E7%BD%91"><span class="nav-text">千兆以太网</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%99%9A%E6%8B%9F%E5%B1%80%E5%9F%9F%E7%BD%91"><span class="nav-text">虚拟局域网</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#IEEE-802-11"><span class="nav-text">IEEE 802.11</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#802-11-%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84"><span class="nav-text">802.11 体系结构</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#802-11-%E4%BF%A1%E9%81%93%E4%B8%8E%E5%85%B3%E8%81%94"><span class="nav-text">802.11 信道与关联</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#802-11-%E5%B8%A7"><span class="nav-text">802.11 帧</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Switches"><span class="nav-text">Switches</span></a></li></ol></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <a target="_blank" rel="noopener" href="https://qhp.us">
    <img class="site-author-image" itemprop="image" alt="从此在回忆里"
      src="/images/avatar.gif">
  </a>
  <p class="site-author-name" itemprop="name">从此在回忆里</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">37</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/QHP1015" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;QHP1015" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="/2439462872@qq.com" title="E-Mail → 2439462872@qq.com"><i class="fas fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://note.qhp.us/2021/10/08/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E9%93%BE%E8%B7%AF%E5%B1%82%E5%92%8C%E5%B1%80%E5%9F%9F%E7%BD%91/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="从此在回忆里">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="从此在回忆里">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          链路层和局域网
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2021-10-08 19:34:00" itemprop="dateCreated datePublished" datetime="2021-10-08T19:34:00+08:00">2021-10-08</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2022-01-05 09:17:02" itemprop="dateModified" datetime="2022-01-05T09:17:02+08:00">2022-01-05</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" itemprop="url" rel="index"><span itemprop="name">计算机网络</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <h2 id="链路层概述"><a href="#链路层概述" class="headerlink" title="链路层概述"></a>链路层概述</h2><p>网络节点的连接方式</p>
<ul>
<li>点到点连接</li>
<li>多点连接<ul>
<li>共享型介质（同轴电缆连接）</li>
<li>通过网络交换机</li>
</ul>
</li>
</ul>
<span id="more"></span>

<p>WAN一般采用点到点链路</p>
<ul>
<li>带宽大、距离远（延迟大） &gt;带宽延迟积大</li>
<li>如果采用多点连接方式<ul>
<li>竞争方式：一旦冲突代价大</li>
<li>令牌等协调方式：在其中协调节点的发送代价大</li>
</ul>
</li>
<li>点到点链路的链路层服务实现非常简单，即封装和解封装</li>
</ul>
<p>LAN一般采用多点连接方式</p>
<ul>
<li>连接节点非常方便</li>
<li>接到共享型介质上（或网络交换机），连接所有其他节点</li>
<li>多点连接方式网络的链路层功能实现相当复杂<ul>
<li>多点接入：协调各节点对共享性介质的访问和使用</li>
<li>竞争方式：冲突之后的协调</li>
<li>令牌方式：令牌产生，占有和释放等</li>
</ul>
</li>
</ul>
<p>术语：</p>
<ul>
<li>主机和路由器是节点（网桥和交换机也是）：nodes</li>
<li>沿着通信路径，连接个相邻节点通信信道的是链路：links<ul>
<li>有线链路</li>
<li>无线链路</li>
<li>局域网，共享性链路</li>
</ul>
</li>
<li>第二层协议数据单元帧frame ，封装数据报</li>
</ul>
<p><strong>数据链路层负责从一个节点通过链路将（帧中的）数据报发送到相邻的物理节点（一个子网内部的2节点）</strong></p>
<p>数据报（分组）在不同的链路上以不同的链路协议传送</p>
<p>不同的链路协议提供不同的服务</p>
<p><strong>链路层服务</strong></p>
<ul>
<li><p>成帧，链路接入</p>
<ul>
<li>将数据报封装在帧中，加上帧头、帧尾部</li>
<li>如果采用的是共享性介质，信道接入获得信道访问权</li>
<li>在帧头部使用“MAC”（物理）地址来标示源和目的，不同于IP地址</li>
</ul>
</li>
<li><p>可靠传输</p>
<ul>
<li>在低出错率的链路上（光纤和双绞线电缆）很少使用</li>
<li>在无线链路经常使用：出错率高</li>
</ul>
</li>
<li><p>流量控制</p>
<ul>
<li>使得相邻的发送和接收方节点的速度匹配</li>
</ul>
</li>
<li><p>错误检测</p>
<ul>
<li>差错由信号衰减和噪声引起</li>
<li>接收方检测出的错误：通知发送端进行重传或丢弃帧</li>
</ul>
</li>
<li><p>差错纠正</p>
<ul>
<li>接收端检查和纠正bit错误，不通过重传来纠正错误</li>
</ul>
</li>
<li><p>双工和全双工</p>
<ul>
<li>半双工：链路可以双向传输，但一次只有一个方向</li>
</ul>
</li>
</ul>
<p><strong>链路层在哪里实现</strong></p>
<ul>
<li>在每一个主机上<ul>
<li>每个路由器上</li>
<li>交换机的每个端口上</li>
</ul>
</li>
<li>链路层功能在“适配器”上 实现（aka network  interface card NIC）或者在一个芯片组上<ul>
<li>以太网卡，802.11 网卡 ; 以太网芯片组</li>
<li>实现链路层和相应的物 理层功能</li>
</ul>
</li>
<li>接到主机的系统总线上</li>
<li>硬件、软件和固件的综合 体</li>
</ul>
<p><strong>适配器通信</strong></p>
<ul>
<li>发送方<ul>
<li>在帧中封装数据报</li>
<li>加上差错控制编码，实现RDT和流量控制功能等</li>
</ul>
</li>
<li>接收方<ul>
<li>检查有无出错，执行 rdt和流量控制功能等</li>
<li>解封装数据报，将其交给上层</li>
</ul>
</li>
<li>适配器是半自治的实现了链路和物理层功能</li>
</ul>
<h2 id="差错检查和纠正错误"><a href="#差错检查和纠正错误" class="headerlink" title="差错检查和纠正错误"></a>差错检查和纠正错误</h2><p>检验和：CRC（循环冗余校验）</p>
<ul>
<li>强大的差错检测码</li>
<li>将数据比特 D，看成是二进制的数据</li>
<li>生成多项式G：双方协商r+1位模式（r次方）<ul>
<li>生成和检查所使用的位模式</li>
</ul>
</li>
<li>目标:选择r位 CRC附加位R，使得<ul>
<li>正好被 G整除（modulo 2）</li>
<li>接收方知道 G，将除以 G，如果非0余数：检查出错误</li>
<li>能检出所有少于r+1位的突发错误</li>
</ul>
</li>
<li>实际中广泛使用（以太网、802.1WiFi，ATM）</li>
</ul>
<p>CRC性能分析</p>
<ul>
<li>突发错误和突发长度</li>
<li>CRC检错性能描述<ul>
<li>能够检查出所有的1bit错误</li>
<li>能够检查出所有的双bits的错误</li>
<li>能够检查出所有长度 =r或者&lt;r 位的错误</li>
<li>出现长度为 r+1的突发错误，检查不出的概率是$\frac{1}{2^{r-1}}$</li>
<li>出现长度大于r+1的突发错误，检查不出的概率是$\frac{1}{2^r}$</li>
</ul>
</li>
</ul>
<p>详细见《自顶向下》P291</p>
<h2 id="多路访问链路和协议"><a href="#多路访问链路和协议" class="headerlink" title="多路访问链路和协议"></a>多路访问链路和协议</h2><p>两种类型的链路（一个子网内部链路连接形式）</p>
<ul>
<li>点对点<ul>
<li>拨号访问的PPP</li>
<li>以太网交换机和主机之间的点对点链路</li>
</ul>
</li>
<li>广播（共享线路或媒体）<ul>
<li>传统以太网</li>
<li>HFC上行链路</li>
<li>802.11无线局域网</li>
</ul>
</li>
</ul>
<h3 id="多路访问协议"><a href="#多路访问协议" class="headerlink" title="多路访问协议"></a>多路访问协议</h3><p>多路访问问题</p>
<ul>
<li>单个共享的广播型链路</li>
<li>2个或更多站点同时传送会造成冲突（collision）<ul>
<li>多个节点在同一个时刻发送，则会收到2个或多个信号叠加</li>
</ul>
</li>
</ul>
<p>多路访问协议（介质访问控制协议：MAC）</p>
<ul>
<li>分布式算法-决定节点如何使用共享信道，即：决定节点什么时候可以发送</li>
<li>关于共享控制的通信必须用借助信道本身传输<ul>
<li>没有带外的信道，各节点使用其协调信道使用</li>
<li>用于传输控制信息</li>
</ul>
</li>
</ul>
<p>理想的多路访问协议</p>
<ul>
<li>给定：Rbps的广播信道</li>
<li>必要条件<ol>
<li>当一个节点要发送时，可以R速率发送</li>
<li>当M个节点要发送，每个可以以R/M的平均速率发送</li>
<li>完全分布的<ul>
<li>没有特殊节点协调发送</li>
<li>没有时钟和时隙的同步</li>
</ul>
</li>
<li>简单</li>
</ol>
</li>
</ul>
<p><strong>MAC（媒体访问控制）协议分类</strong></p>
<ul>
<li>信道划分<ul>
<li>把信道划分成小片（时间、频率、编码）</li>
<li>分配片给每个节点专用</li>
</ul>
</li>
<li>随机访问<ul>
<li>信道不划分，允许冲突</li>
<li>冲突后恢复</li>
</ul>
</li>
<li>依次轮流 <ul>
<li>节点依次轮流</li>
<li>但是有很多数据传输的节点可以获得较长的信道使用权</li>
</ul>
</li>
</ul>
<h3 id="信道划分协议"><a href="#信道划分协议" class="headerlink" title="信道划分协议"></a>信道划分协议</h3><p>TDMA（time division multiple access，时分多路复用）</p>
<ul>
<li>轮流使用信道，信道的时间分为周期</li>
<li>每个站点使用每周期中固定的时隙（长度=帧传输时间）传输帧</li>
<li>如果站点无帧传输，时隙空闲会造成浪费</li>
<li>如：6站LAN，1、3、4有数据报，时隙2、5、6空闲</li>
</ul>
<p>FDMA（frequency division multiple access，频分多路复用）</p>
<ul>
<li>信道的有效频率范围被分成一个个小的频段</li>
<li>每个站点被分配一个固定的频段</li>
<li>分配给站点的频段如果没有被使用，则空闲</li>
<li>如：6站LAN，1、3、4有数据报，频段2、5、 6空闲</li>
</ul>
<p>CDMA（code division multiple access，码分多路复用）</p>
<ul>
<li>所有站点在整个频段上同时进行传输，采用编码原理加以区分</li>
<li>完全无冲突</li>
<li>假定：信号同步很好，线性叠加</li>
</ul>
<p>比喻</p>
<ul>
<li>TDM：不同的人在不同的时刻讲话</li>
<li>FDM：不同的组在不同的小房间里通信</li>
<li>CDMA：不同的人使用不同的语言讲话</li>
</ul>
<h3 id="随机存取协议"><a href="#随机存取协议" class="headerlink" title="随机存取协议"></a>随机存取协议</h3><ul>
<li>当节点有帧要发送时<ul>
<li>以信道带宽的全部 Rbps发送</li>
<li>没有节点间的预先协调</li>
</ul>
</li>
<li>两个或更多节点同时传输，会发生冲突 “collision”</li>
<li>随机存取协议规定<ul>
<li>如何检测冲突</li>
<li>如何从冲突中恢复（如：通过稍后的重传）</li>
</ul>
</li>
<li>随机MAC协议<ul>
<li>时隙ALOHA</li>
<li>ALOHA</li>
<li>CSMA，CSMA/CD，CSMA/CA</li>
</ul>
</li>
</ul>
<h4 id="时隙ALOHA"><a href="#时隙ALOHA" class="headerlink" title="时隙ALOHA"></a>时隙ALOHA</h4><p><img src="/2021/10/08/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E9%93%BE%E8%B7%AF%E5%B1%82%E5%92%8C%E5%B1%80%E5%9F%9F%E7%BD%91/image-20210907115132473.png" alt="image-20210907115132473"></p>
<p>假设</p>
<ul>
<li>所有帧是等长的</li>
<li>时间被划分成相等的时隙 ，每个时隙可发送一帧</li>
<li>节点只在时隙开始时发送帧</li>
<li>节点在时钟上是同步的</li>
<li>如果两个或多个节点在一 个时隙传输，所有的站点都能检测到冲突 </li>
</ul>
<p>运行</p>
<ul>
<li>当节点获取新的帧，在下一 个时隙传输</li>
<li>传输时没有检测到冲突，成功</li>
<li>节点能够在下一时隙发送新帧</li>
<li>检测时如果检测到冲突，失败</li>
<li>节点在每一个随后的时隙以概率p重传帧直到成功</li>
</ul>
<p>优点</p>
<ul>
<li>节点可以以信道带宽全速连续传输</li>
<li>高度分布：仅需要节点之间在时隙上的同步</li>
<li>简单 </li>
</ul>
<p>缺点</p>
<ul>
<li>存在冲突，浪费时隙</li>
<li>即使有帧要发送，仍然有可能存在空闲的时隙</li>
<li>节点检测冲突的时间&lt;帧传输的时间，因为必须传完</li>
<li>需要时钟上同步</li>
</ul>
<p>最好情况：信道利用率37%</p>
<h4 id="纯ALOHA（非时隙）"><a href="#纯ALOHA（非时隙）" class="headerlink" title="纯ALOHA（非时隙）"></a>纯ALOHA（非时隙）</h4><p><img src="/2021/10/08/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E9%93%BE%E8%B7%AF%E5%B1%82%E5%92%8C%E5%B1%80%E5%9F%9F%E7%BD%91/image-20210907124300634.png" alt="image-20210907124300634"></p>
<ul>
<li>无时隙ALOHA：简单、无须节点间在时间上同步</li>
<li>当有帧需要传输：马上传输</li>
<li>冲突的概率增加<ul>
<li>帧在t0 发送，和其它在[t0 -1, t0 +1]区间内开始发送的帧冲突</li>
<li>和当前帧冲突的区间</li>
</ul>
</li>
<li>效率比时隙ALOHA差</li>
</ul>
<h4 id="CSMA"><a href="#CSMA" class="headerlink" title="CSMA"></a>CSMA</h4><p>CSMA（载波侦听多路访问）：在传输前先侦听信道</p>
<ul>
<li>如果侦听到信道空闲，传送整个帧</li>
<li>如果侦听到信道忙，推迟传送</li>
</ul>
<p>CSMA冲突：冲突仍然可能发生</p>
<ul>
<li><p>由传播延迟造成：两个节点可能侦听不到正在进行的传输</p>
</li>
<li><p>冲突：整个冲突帧的传输时间都被浪费了，是无效的传输</p>
</li>
<li><p>注意：传播延迟（距离）决定了冲突的概率</p>
<blockquote>
<p>节点依据本地的信道使用情况来判断全部信道的使用情况，是局部性的判断</p>
</blockquote>
</li>
</ul>
<h5 id="CSMA-CD（冲突检测）"><a href="#CSMA-CD（冲突检测）" class="headerlink" title="CSMA/CD（冲突检测）"></a>CSMA/CD（冲突检测）</h5><ul>
<li><p>载波侦听CSMA：和在CSMA中一样发送前侦听信道</p>
</li>
<li><p>没有传完一个帧就可以在短时间内检测到冲突</p>
</li>
<li><p>冲突发生时则传输终止，减少对信道的浪费</p>
</li>
<li><p>冲突检测CD技术，在有线局域网中容易实现：</p>
<ul>
<li>检测信号强度，比较传输与接收到的信号是否相同</li>
<li>通过周期的过零点检测</li>
</ul>
</li>
<li><p>以太网CSMA/CD算法</p>
<ol>
<li><p>适配器获取数据报，创建帧</p>
</li>
<li><p>发送前：侦听信道CS</p>
</li>
</ol>
<ul>
<li>闲：开始传送帧</li>
<li>忙：一直等到闲再发送</li>
</ul>
<ol start="3">
<li>发送过程中，冲突检测CD</li>
</ol>
<ul>
<li>没有冲突：成功</li>
<li>检测到冲突：放弃，之后尝试重发</li>
</ul>
<ol start="4">
<li>发送方适配器检测到冲突，除放弃外还发送一个Jam信号（强化冲突信息），所有听到冲突的适配器也是如此</li>
</ol>
<ul>
<li>强化冲突：让所有站点都知道发生冲突，防止冲突时间过短导致其他结点不知道发生冲突</li>
</ul>
<ol start="5">
<li>如果放弃，适配器进入指数退避状态</li>
</ol>
<p>  在第m次失败后，适配器在${0,1,2, ,2^{m-1}}$中随机选择一个数K，等待K*512位时后，转到步骤2</p>
<blockquote>
<p>二进制指数退避算法（exponential backoff）</p>
<ul>
<li>目标：适配器试图适应当前负载，在一个变化的碰撞窗口中随机选择时间点尝试重发<ul>
<li>高负载：重传窗口时间大，减少冲突，但等待时间长</li>
<li>低负载：使得各站点等待时间少，但冲突概率大</li>
</ul>
</li>
<li>首次碰撞：在{0，1}选择K；延迟K512位时</li>
<li>第2次碰撞：在{0，1，2，3}选择K</li>
<li>第10次碰撞：在{0，1，2，3，……，1023}选择<br>K</li>
</ul>
</blockquote>
</li>
<li><p>CSMA/CD效率：$efficiency=\frac{1}{1+5T_{prop}/T_{trans}}$</p>
<ul>
<li>$T_{prop}$ = LAN上2个节点的最大传播延迟</li>
<li>$T_{trans}$ = 传输最大帧的时间</li>
<li>效率变为1的两种情况<ol>
<li>当tprop 变成0时</li>
<li>当ttrans 变成无穷大时</li>
</ol>
</li>
<li>比ALOHA更好的性能，而且简单，廉价，分布式</li>
</ul>
</li>
</ul>
<h5 id="CSMA-CA（冲突避免）"><a href="#CSMA-CA（冲突避免）" class="headerlink" title="CSMA/CA（冲突避免）"></a>CSMA/CA（冲突避免）</h5><ul>
<li><p>802.11（WLAN）：发送前侦听信道</p>
<ul>
<li>不会和其它节点正在进行的传输发生冲突</li>
</ul>
</li>
<li><p>802.11：没有冲突检测</p>
<ul>
<li><p>无法检测冲突：自身信号远远大于其他节点信号</p>
</li>
<li><p>即使能CD：冲突与成功没有直接关系</p>
<blockquote>
<p>隐藏终端和暴露终端问题</p>
</blockquote>
</li>
<li><p>利用冲突避免：CSMA/C(ollision)A(voidance)</p>
<ul>
<li>无法CD，则一旦发送就全部发送完毕，不CD</li>
<li>为了避免无CD带来的信道利用率低的问题，事前进行冲突避免</li>
</ul>
</li>
</ul>
</li>
<li><p>发送方</p>
<ol>
<li><p>如果站点侦测到信道空闲持续DIFS（分布式帧间间隙）长，则传输整个帧</p>
</li>
<li><p>如果侦测到信道忙碌，那么选择一个随机回退值，并在信道空闲时递减该值；如果信道忙碌，回退值不会变化</p>
<p>当数到0时（只生在信道闲时）发送整个帧如果没有收到ACK，增加回退值，重复2</p>
</li>
</ol>
</li>
<li><p>802.11 接收方</p>
<ul>
<li>如果帧正确，则在SIFS（短帧间间隔）后发送ACK</li>
</ul>
</li>
<li><p>无法完全避免冲突</p>
<ul>
<li>两个站点相互隐藏<ul>
<li>A,B 相互隐藏，C在传输</li>
<li>A,B选择了随机回退值</li>
<li>一个节点如A胜利了，发送</li>
<li>而B节点收不到，顺利count down到0 发送</li>
<li>A,B的发送在C附近形成了干扰</li>
</ul>
</li>
<li>选择了非常靠近的随机回退值：<ul>
<li>A,B选择的值非常近</li>
<li>A到0后发送</li>
<li>但是这个信号还没到达B时</li>
<li>B也到0了，发送</li>
<li>冲突</li>
</ul>
</li>
</ul>
</li>
<li><p>允许发送方“预约”信道，而不是随机访问该信道：避免长数据帧的冲突（可选项）</p>
<ul>
<li>发送方首先使用CSMA向BS发送一个小的RTS分组<ul>
<li>RTS可能会冲突（但是由于比较短，浪费信道较少）</li>
</ul>
</li>
<li>BS广播clear-to-send CTS，作为RTS的响应</li>
<li>CTS能够被所有涉及到的节点听到<ul>
<li>发送方发送数据帧</li>
<li>其它节点抑制发送</li>
</ul>
</li>
</ul>
<blockquote>
<p>采用小的预约分组，可以完全避免数据帧的冲突</p>
</blockquote>
</li>
</ul>
<h3 id="线缆接入网络"><a href="#线缆接入网络" class="headerlink" title="线缆接入网络"></a>线缆接入网络</h3><p><img src="/2021/10/08/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E9%93%BE%E8%B7%AF%E5%B1%82%E5%92%8C%E5%B1%80%E5%9F%9F%E7%BD%91/image-20211006125243999.png" alt="image-20211006125243999"></p>
<ul>
<li>多个40Mbps 下行（广播）信道，FDM<ul>
<li>下行：通过FDM分成若干信道，互联网、数字电视等</li>
<li>互联网信道：只有1个CMTS在其上传输</li>
</ul>
</li>
<li>多个30 Mbps上行的信道，FDM<ul>
<li>多路访问：所有用户使用；通过TDM分成微时隙</li>
<li>部分时隙（下行）：分配</li>
<li>部分时隙（上行）：竞争预约</li>
</ul>
</li>
<li>DOCSIS（data over cable service interface spec）协议<ul>
<li>采用FDM进行信道的划分：若干上行、下行信道</li>
<li>下行信道:<ul>
<li>在下行MAP帧中：CMTS告诉各节点微时隙分配方案，分配给各站点的上行微时隙</li>
<li>另外：头端传输下行数据（给各个用户）</li>
</ul>
</li>
<li>TDM上行信道<ul>
<li>采用TDM的方式将上行信道分成若干微时隙：MAP指定</li>
<li>站点采用分配给它的微时隙上行数据传输：分配</li>
<li>在特殊的上行微时隙中，各站点请求上行微时隙：竞争<ul>
<li>各站点对于该时隙的使用是随机访问的</li>
<li>一旦碰撞（请求不成功，结果是：在下行的MAP中没有为它分配，则利用二进制退避算法）选择时隙上传输</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="轮流MAC协议"><a href="#轮流MAC协议" class="headerlink" title="轮流MAC协议"></a>轮流MAC协议</h3><p>轮流（Taking Turns）：综合信道划分MAC协议和随机访问MAC协议的优点</p>
<h4 id="轮询协议"><a href="#轮询协议" class="headerlink" title="轮询协议"></a>轮询协议</h4><ul>
<li>主节点邀请从节点依次传送</li>
<li>从节点一般比较“dumb”</li>
<li>缺点:<ul>
<li>轮询（polling）开销：轮询本身消耗信道带宽</li>
<li>等待时间：每个节点需等到主节点轮询后开始传输，即使只有一个节点，也需要等到轮询一周后才能够发送</li>
<li>单点故障：主节点失效时造成整个系统无法工作</li>
</ul>
</li>
</ul>
<h4 id="令牌传递协议"><a href="#令牌传递协议" class="headerlink" title="令牌传递协议"></a>令牌传递协议</h4><ul>
<li>控制令牌( token)循环从一个节点到下一个节点传递</li>
<li>令牌报文：特殊的帧</li>
<li>缺点<ul>
<li>令牌开销：本身消耗带宽</li>
<li>延迟：只有等到抓住令牌，才可传输</li>
<li>单点故障（token）：<ul>
<li>令牌丢失系统级故障，整个系统无法传输</li>
<li>复杂机制重新生成令牌</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong>MAC 协议总结</strong></p>
<ul>
<li>信道划分：按时间、频率或者编码<ul>
<li>TDMA、FDMA、CDMA</li>
</ul>
</li>
<li>随机访问（动态）<ul>
<li>ALOHA，S-ALOHA，CSMA，CSMA/CD</li>
<li>载波侦听: 在有些介质上很容易（wire：有线介质），但在有些介质上比较困难（wireless：无线）</li>
<li>CSMA/CD：802.3 Ethernet网中使用</li>
<li>CSMA/CA：802.11WLAN中使用</li>
</ul>
</li>
<li>依次轮流协议<ul>
<li>集中：由一个中心节点轮询</li>
<li>分布：通过令牌控制</li>
<li>蓝牙、FDDI、令牌环</li>
</ul>
</li>
</ul>
<h2 id="LANs"><a href="#LANs" class="headerlink" title="LANs"></a>LANs</h2><p>交换机局域网，提供的服务有链路层寻址和以太网协议</p>
<h3 id="链路层寻址和ARP"><a href="#链路层寻址和ARP" class="headerlink" title="链路层寻址和ARP"></a>链路层寻址和ARP</h3><h4 id="网络地址和MAC地址"><a href="#网络地址和MAC地址" class="headerlink" title="网络地址和MAC地址"></a>网络地址和MAC地址</h4><ul>
<li>32bit IP 地址：<ul>
<li>网络层地址</li>
<li>前n-1跳：用于使数据报到达目的IP子网</li>
<li>最后一跳：到达子网中的目标节点</li>
</ul>
</li>
<li>LAN（MAC/物理/以太网）地址<ul>
<li>用于使帧从一个网卡传递到与其物理连接的另一个网卡(在同一个物理网络中)</li>
<li>48bit MAC地址固化在适配器的ROM，有时也可以通过软件设定</li>
<li>理论上全球任何2个网卡的MAC地址都不相同</li>
<li>e.g.: 1A-2F-BB-76-09-AD</li>
</ul>
</li>
</ul>
<p><strong>网络地址和MAC地址分离</strong></p>
<ol>
<li>IP地址和MAC地址的作用不同<ul>
<li>IP地址是分层的<ul>
<li>一个子网所有站点网络号一致，路由聚集，减少路由表</li>
<li>需要一个网络中的站点地址网络号一致，如果捆绑需要定制网卡非常麻烦</li>
<li>希望网络层地址是配置的；IP地址完成网络到网络的交付</li>
</ul>
</li>
<li>MAC地址是一个平面的<ul>
<li>网卡在生产时不知道被用于哪个网络，因此给网卡一个唯一的标示，用于区分一个网络内部不同的网卡即可</li>
<li>可以完成一个物理网络内部的节点到节点的数据交付</li>
</ul>
</li>
</ul>
</li>
<li>分离好处<ul>
<li>网卡坏了，IP不变，可以捆绑到另外一个网卡的MAC地址上</li>
<li>物理网络还可以除IP之外支持其他网络层协议，链路协议为任意上层网络协议， 如IPX等</li>
</ul>
</li>
<li>捆绑的问题<ul>
<li>如果仅仅使用IP地址，不用MAC地址，那么它仅支持IP协议</li>
<li>每次上电都要重新写入网卡IP地址；</li>
<li>另外一个选择就是不使用任何地址；不用MAC地址，则每到来一个帧都要上传到IP层次，由它判断是不是需要接受，干扰一次</li>
</ul>
</li>
</ol>
<p>局域网上每个适配器都有一个唯一的LAN地址</p>
<p>全局广播地址（Broadcast address） ：FF-FF-FF-FF-FF-FF，发出的帧局域网内所有结点均能接收</p>
<p>MAC 地址由 IEEE 管理和分配</p>
<p>制造商购入 MAC 地址空间（保证唯一性）</p>
<h4 id="ARP（地址解析协议）"><a href="#ARP（地址解析协议）" class="headerlink" title="ARP（地址解析协议）"></a>ARP（地址解析协议）</h4><p>在LAN上的每个IP节点都有一个ARP表</p>
<ul>
<li><p>ARP表：包括一些LAN节点IP/MAC地址的映射</p>
<blockquote>
<p>&lt; IP address；MAC address；TTL&gt;</p>
<ul>
<li>TTL时间是指地址映射失效的时间</li>
<li>典型是20min</li>
</ul>
</blockquote>
</li>
</ul>
<p>工作流程</p>
<ul>
<li>A要发送帧给B（B的IP地址已知），但B的MAC地址不在A的ARP表中</li>
<li>A广播包含B的IP地址的ARP查询包<ul>
<li>Dest MAC address =FF-FF-FF-FF-FF-FF</li>
<li>LAN上的所有节点都会收到该查询包</li>
</ul>
</li>
<li>B接收到ARP包，回复A自己的MAC地址<ul>
<li>帧发送给A</li>
<li>用A的MAC地址（单播）</li>
</ul>
</li>
<li>A在自己的ARP表中，缓存IP-to-MAC地址映射关系，直到信息超时<ul>
<li>软状态：靠定期刷新维持的系统状态</li>
<li>定期刷新周期之间维护的状态信息可能和原有系统不一致</li>
</ul>
</li>
<li>ARP是即插即用的<ul>
<li>节点自己创建ARP的表项</li>
<li>无需网络管理员的干预</li>
</ul>
</li>
</ul>
<h3 id="以太网"><a href="#以太网" class="headerlink" title="以太网"></a>以太网</h3><h4 id="以太网的物理拓扑"><a href="#以太网的物理拓扑" class="headerlink" title="以太网的物理拓扑"></a><strong>以太网的物理拓扑</strong></h4><ul>
<li><p>总线：在上个世纪90年代中期很流行</p>
<ul>
<li><p>所有节点在一个碰撞域内，一次只允许一个节点发送</p>
</li>
<li><p>可靠性差，如果介质破损，截面形成信号的反射，发送节点误认为是冲突，总是冲突</p>
<p><img src="/2021/10/08/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E9%93%BE%E8%B7%AF%E5%B1%82%E5%92%8C%E5%B1%80%E5%9F%9F%E7%BD%91/image-20211008092831473.png" alt="image-20211008092831473"></p>
</li>
</ul>
</li>
<li><p>星型：目前最主流</p>
<ul>
<li><p>连接选择: hub 或者switch</p>
</li>
<li><p>现在一般是交换机在中心</p>
</li>
<li><p>每个节点以及相连的交换机端口使用（独立的）以太网协议（不会和其他节点的发送产生碰撞）</p>
<p><img src="/2021/10/08/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E9%93%BE%E8%B7%AF%E5%B1%82%E5%92%8C%E5%B1%80%E5%9F%9F%E7%BD%91/image-20211008092906021.png" alt="image-20211008092906021"></p>
</li>
</ul>
</li>
</ul>
<h4 id="以太帧结构"><a href="#以太帧结构" class="headerlink" title="以太帧结构"></a>以太帧结构</h4><p>发送方适配器在以太网帧中封装IP数据报，或其他网络层协议数据单元</p>
<p><img src="/2021/10/08/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E9%93%BE%E8%B7%AF%E5%B1%82%E5%92%8C%E5%B1%80%E5%9F%9F%E7%BD%91/image-20211008093047673.png" alt="image-20211008093047673"></p>
<ul>
<li>前导码<ul>
<li>7B 10101010 + 1B 10101011</li>
<li>用来同步接收方和发送方的时钟速率<ul>
<li>使得接收方将自己的时钟调到发送端的时钟</li>
<li>从而可以按照发送端的时钟来接收所发送的帧</li>
</ul>
</li>
</ul>
</li>
<li>地址：6字节源MAC地址，目标MAC地址<ul>
<li>如：帧目标地址=本站MAC地址，或是广播地址，接收，递交帧中的数据到网络层</li>
<li>否则，适配器忽略该帧</li>
</ul>
</li>
<li>类型：指出高层协(大多情况下是IP，但也支持其它网络层协议Novell IPX和AppleTalk)</li>
<li>CRC：在接收方校验<ul>
<li>如果没有通过校验，丢弃错误帧</li>
</ul>
</li>
</ul>
<h4 id="以太网-1"><a href="#以太网-1" class="headerlink" title="以太网"></a>以太网</h4><p>以太网提供无连接、不可靠的服务</p>
<ul>
<li>无连接：帧传输前，发送方和接收方之间没有握手</li>
<li>不可靠：接收方适配器不发送ACKs或NAKs给发送方<ul>
<li>递交给网络层的数据报流可能有gap</li>
<li>如上层使用像传输层TCP协议这样的rdt，gap会被补上(源主机，TCP实体)</li>
<li>否则，应用层就会看到gap</li>
</ul>
</li>
<li>以太网的MAC协议：采用二进制退避的CSMA/CD介质访问控制形式</li>
</ul>
<p>以太网标准：链路和物理层</p>
<ul>
<li>很多不同的以太网标准</li>
<li>相同的MAC协议（介质访问控制）和帧结构</li>
<li>不同的速率：2 Mbps、10 Mbps 、100 Mbps 、1Gbps、10G bps</li>
<li>不同的物理层标准</li>
<li>不同的物理层媒介：光纤，同轴电缆和双绞线</li>
</ul>
<p>以太网使用CSMA/CD算法</p>
<h4 id="Hubs"><a href="#Hubs" class="headerlink" title="Hubs"></a><strong>Hubs</strong></h4><p>Hubs 本质上是物理层的中继器:</p>
<ul>
<li>从一个端口收，转发到所有其他端口</li>
<li>速率一致</li>
<li>没有帧的缓存</li>
<li>在hub端口上没有CSMA/CD机制:适配器检测冲突</li>
<li>提供网络管理功能</li>
</ul>
<h4 id="Manchester-编码"><a href="#Manchester-编码" class="headerlink" title="Manchester 编码"></a>Manchester 编码</h4><ul>
<li><p>在10BaseT中使用</p>
</li>
<li><p>每一个bit的位时中间有一个信号跳变</p>
</li>
<li><p>允许在接收方和发送方节点之间进行时钟同步</p>
<ul>
<li>节点间不需要集中的和全局的时钟</li>
</ul>
</li>
<li><p>10Mbps，使用20M带宽，效率50%</p>
<p><img src="/2021/10/08/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E9%93%BE%E8%B7%AF%E5%B1%82%E5%92%8C%E5%B1%80%E5%9F%9F%E7%BD%91/image-20211008100338741.png" alt="image-20211008100338741"></p>
</li>
</ul>
<h4 id="100BaseT中的4b5b编码"><a href="#100BaseT中的4b5b编码" class="headerlink" title="100BaseT中的4b5b编码"></a>100BaseT中的4b5b编码</h4><p>利用5个字节来代替四个字节，防止传输中长时间编码不跳变，无法准确获取时钟信号的状态</p>
<p><img src="/2021/10/08/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E9%93%BE%E8%B7%AF%E5%B1%82%E5%92%8C%E5%B1%80%E5%9F%9F%E7%BD%91/image-20211008100500832.png" alt="image-20211008100500832"></p>
<h4 id="千兆以太网"><a href="#千兆以太网" class="headerlink" title="千兆以太网"></a>千兆以太网</h4><ul>
<li>采用标准的以太帧格式</li>
<li>允许点对点链路和共享广播信道</li>
<li>物理编码：8b10b编码</li>
<li>在共享模式，继续使用CSMA/CD MAC技术，节点间需要较短距离以提高利用率</li>
<li>交换模式：全双工千兆可用于点对点链路<ul>
<li>站点使用专用信道，基本不会冲突，效率高</li>
<li>除非发往同一个目标站点</li>
</ul>
</li>
</ul>
<h3 id="虚拟局域网"><a href="#虚拟局域网" class="headerlink" title="虚拟局域网"></a>虚拟局域网</h3><p>虚拟局域网（VLAN），支持VLAN的交换机允许经一个单一的物理局域网基础设施定义多个虚拟局域网</p>
<h4 id="IEEE-802-11"><a href="#IEEE-802-11" class="headerlink" title="IEEE 802.11"></a>IEEE 802.11</h4><ul>
<li>802.11b<ul>
<li>使用无需许可的2.4-5 GHz 频谱</li>
<li>无绳电话和微波炉</li>
<li>最高11 Mbps</li>
<li>在物理层采用直接序列扩频direct sequence spreadspectrum (DSSS)<ul>
<li>所有的主机采用同样的序列码</li>
</ul>
</li>
</ul>
</li>
<li>802.11a<ul>
<li>更高频率5-6 GHz</li>
<li>最高54 Mbps</li>
<li>距离相对短，受多路径影响大</li>
</ul>
</li>
<li>802.11g<ul>
<li>频率2.4-5 GHz</li>
<li>最大54 Mbps</li>
<li>与802.11b向后兼容</li>
</ul>
</li>
<li>802.11n：多天线MIMO<ul>
<li>频率2.4-5 GHz</li>
<li>最高200 Mbps</li>
</ul>
</li>
<li>所有的802.11标准都是用CSMA/CA进行多路访问</li>
<li>所有的802.11标准都有基站模式和自组织网络模式</li>
</ul>
<h4 id="802-11-体系结构"><a href="#802-11-体系结构" class="headerlink" title="802.11 体系结构"></a>802.11 体系结构</h4><ul>
<li>无线主机与基站通信<ul>
<li>基站base station = 接入点access point (AP)</li>
</ul>
</li>
<li>基础设施模式下的基本服务集Basic Service Set（BSS）（aka“cell”）包括以下构件<ul>
<li>无线主机</li>
<li>接入点（AP）：基站</li>
<li>自组织模式下：只有无线主机</li>
</ul>
</li>
</ul>
<p><img src="/2021/10/08/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E9%93%BE%E8%B7%AF%E5%B1%82%E5%92%8C%E5%B1%80%E5%9F%9F%E7%BD%91/image-20211008101251525.png" alt="image-20211008101251525"></p>
<h4 id="802-11-信道与关联"><a href="#802-11-信道与关联" class="headerlink" title="802.11 信道与关联"></a>802.11 信道与关联</h4><ul>
<li><p>802.11b: 2.4GHz-2.485GHz 频谱被分为11个相互不同的但是部分重叠的频段</p>
<ul>
<li>AP管理员为AP选择一个频率</li>
<li>可能的干扰: 邻居AP可能选择同样一个信道!</li>
</ul>
</li>
<li><p>主机: 必须在通信之前和AP建立associate</p>
<ul>
<li><p>扫描所有的信道，侦听包含AP SSID和MAC地址的信标帧</p>
<ul>
<li><p>主动扫描：主机发送探测，接受AP的响应</p>
<blockquote>
<p>主动扫描:<br>(1) H1广播探测请求帧<br>(2) 自AP发送探测响应<br>(3) H1向选择的AP发送关联请求帧<br>(4) 选择的AP向H1发送关联的响应帧</p>
</blockquote>
</li>
<li><p>被动扫描</p>
<blockquote>
<p>被动扫描:<br>(1) AP发送信标帧<br>(2) 关联请求帧的发送：H1向拟关联的AP<br>(3) 关联响应帧的发送: AP向H1</p>
</blockquote>
</li>
</ul>
</li>
<li><p>选择希望关联的AP</p>
</li>
<li><p>可能需要执行鉴别（认证）[Chapter 8]</p>
<ul>
<li>基于MAC、用户名口令</li>
<li>通过AP的中继，使用RADIUS鉴别服务器进行身份鉴别</li>
</ul>
</li>
<li><p>将会执行DHCP获得IP地址和AP所在的子网前缀</p>
</li>
</ul>
</li>
</ul>
<h4 id="802-11-帧"><a href="#802-11-帧" class="headerlink" title="802.11 帧"></a>802.11 帧</h4><p><img src="/2021/10/08/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E9%93%BE%E8%B7%AF%E5%B1%82%E5%92%8C%E5%B1%80%E5%9F%9F%E7%BD%91/image-20211008115830070.png" alt="image-20211008115830070"></p>
<p><img src="/2021/10/08/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/%E9%93%BE%E8%B7%AF%E5%B1%82%E5%92%8C%E5%B1%80%E5%9F%9F%E7%BD%91/image-20211008115945670.png" alt="image-20211008115945670"></p>
<h4 id="Switches"><a href="#Switches" class="headerlink" title="Switches"></a>Switches</h4><p><strong>Hub：集线器</strong></p>
<ul>
<li>网段（LAN segments）：可以允许一个站点发送的网络范围<ul>
<li>在一个碰撞域，同时只允许一个站点在发送</li>
<li>如果有2个节点同时发送，则会碰撞</li>
<li>通常拥有相同的前缀，比IP子网更详细的前缀</li>
</ul>
</li>
<li>所有以Hub连到一起的站点处在一个网段，处在一个碰撞域<ul>
<li>骨干Hub将所有网段连到了一起</li>
</ul>
</li>
<li>通过Hub可扩展节点之间的最大距离</li>
<li>通过HUB,不能将 10BaseT 和 100BaseT 的网络连接到一起</li>
</ul>
<p><strong>交换机</strong></p>
<ul>
<li>链路层设备：扮演主动角色（端口执行以太网协议）<ul>
<li>对帧进行存储和转发</li>
<li>对于到来的帧，检查帧头，根据目标MAC地址进行选择性转发</li>
<li>当帧需要向某个（些）网段进行转发，需要使用CSMA/CD进行接入控制</li>
<li>通常一个交换机端口一个独立网段</li>
</ul>
</li>
<li>透明：主机对交换机的存在可以不关心<ul>
<li>通过交换机相联的各节点好像这些站点是直接相联的一样</li>
<li>有MAC地址；无IP地址</li>
</ul>
</li>
<li>即插即用，自学习<ul>
<li>交换机无需配置</li>
</ul>
</li>
</ul>
<p><strong>交换机：多路同时传输</strong></p>
<ul>
<li>主机有一个专用和直接到交换机的连接</li>
<li>交换机缓存到来的帧</li>
<li>对每个帧进入的链路使用以太网协议，没有碰撞；全双工<ul>
<li>每条链路都是一个独立的碰撞域</li>
<li>MAC协议在其中的作用弱化了</li>
</ul>
</li>
</ul>
<p><strong>交换机：自学习</strong></p>
<ul>
<li>交换机通过学习得到哪些主机（mac地址）可以通过哪些端口到达<ul>
<li>当接收到帧，交换机学习到发送站点所在的端口（网段）</li>
<li>记录发送方MAC地址/进入端口映射关系，在交换表中</li>
</ul>
</li>
</ul>
<p><strong>交换机 VS 路由器</strong></p>
<ul>
<li>都是存储转发设备，但层次不同<ul>
<li>交换机：链路层设备（检查链路层头部）</li>
<li>路由器：网络层设备（检查网络层的头部）</li>
</ul>
</li>
<li>都有转发表<ul>
<li>交换机：维护交换表，按照MAC地址转发<ul>
<li>执行过滤、自学习和生成树算法</li>
<li>即插即用；二层设备，速率高</li>
<li>执行生成树算法，限制广播帧的转发</li>
<li>ARP表项随着站点数量增多而增多</li>
</ul>
</li>
<li>路由器维护路由表，执行路由算法<ul>
<li>路由算法能够避免环路，无需执行生成树算法，可以以各种拓扑构建网络</li>
<li>对广播分组做限制</li>
<li>不是即插即用的，配置网络地址（子网前缀）</li>
<li>三层设备，速率低</li>
</ul>
</li>
</ul>
</li>
</ul>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E5%A4%A7%E5%AD%A6%E8%AF%BE%E7%A8%8B/" rel="tag"># 大学课程</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2021/10/04/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL%E6%9D%83%E9%99%90%E7%AE%A1%E7%90%86/" rel="prev" title="MySQL权限管理">
                  <i class="fa fa-chevron-left"></i> MySQL权限管理
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2021/10/09/JS/JS%E7%B1%BB%E5%9E%8B%E3%80%81%E5%80%BC%E5%92%8C%E5%8F%98%E9%87%8F/" rel="next" title="JS类型、值和变量">
                  JS类型、值和变量 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fab fa-optin-monster"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">从此在回忆里</span>
</div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  
<script src="https://cdn.jsdelivr.net/npm/hexo-generator-searchdb@1.4.0/dist/search.js" integrity="sha256-vXZMYLEqsROAXkEw93GGIvaB2ab+QW6w3+1ahD9nXXA=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>




  <script src="/js/third-party/pace.js"></script>

  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js","integrity":"sha256-r+3itOMtGGjap0x+10hu6jW/gZCzxHsoKrOd7gyRSGY="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>



</body>
</html>
